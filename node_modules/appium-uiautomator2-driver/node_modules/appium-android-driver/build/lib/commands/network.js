"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.helpers = exports.default = exports.commands = void 0;
require("source-map-support/register");
var _lodash = _interopRequireDefault(require("lodash"));
var _driver = require("appium/driver");
var _bluebird = _interopRequireDefault(require("bluebird"));
let commands = {},
  helpers = {},
  extensions = {};
exports.helpers = helpers;
exports.commands = commands;
const AIRPLANE_MODE_MASK = 0b001;
const WIFI_MASK = 0b010;
const DATA_MASK = 0b100;
const GEO_EPSILON = Number.MIN_VALUE;
const WIFI_KEY_NAME = 'wifi';
const DATA_KEY_NAME = 'data';
const AIRPLANE_MODE_KEY_NAME = 'airplaneMode';
commands.getNetworkConnection = async function getNetworkConnection() {
  this.log.info('Getting network connection');
  let airplaneModeOn = await this.adb.isAirplaneModeOn();
  let connection = airplaneModeOn ? AIRPLANE_MODE_MASK : 0;
  if (!airplaneModeOn) {
    let wifiOn = await this.isWifiOn();
    connection |= wifiOn ? WIFI_MASK : 0;
    let dataOn = await this.adb.isDataOn();
    connection |= dataOn ? DATA_MASK : 0;
  }
  return connection;
};
commands.isWifiOn = async function isWifiOn() {
  return await this.adb.isWifiOn();
};
commands.mobileSetConnectivity = async function mobileSetConnectivity(opts = {}) {
  const {
    wifi,
    data,
    airplaneMode
  } = opts;
  if (_lodash.default.every([wifi, data, airplaneMode], _lodash.default.isUndefined)) {
    throw new _driver.errors.InvalidArgumentError(`Either one of ['${WIFI_KEY_NAME}', '${DATA_KEY_NAME}', '${AIRPLANE_MODE_KEY_NAME}'] options must be provided`);
  }
  const currentState = await this.mobileGetConnectivity({
    services: [...(_lodash.default.isUndefined(wifi) ? [] : [WIFI_KEY_NAME]), ...(_lodash.default.isUndefined(data) ? [] : [DATA_KEY_NAME]), ...(_lodash.default.isUndefined(airplaneMode) ? [] : [AIRPLANE_MODE_KEY_NAME])]
  });
  const setters = [];
  if (!_lodash.default.isUndefined(wifi) && currentState.wifi !== Boolean(wifi)) {
    setters.push(this.adb.setWifiState(wifi, this.isEmulator()));
  }
  if (!_lodash.default.isUndefined(data) && currentState.data !== Boolean(data)) {
    setters.push(this.adb.setDataState(data, this.isEmulator()));
  }
  if (!_lodash.default.isUndefined(airplaneMode) && currentState.airplaneMode !== Boolean(airplaneMode)) {
    setters.push(async () => {
      await this.adb.setAirplaneMode(airplaneMode);
      if (this.adb.getApiLevel() < 30) {
        await this.adb.broadcastAirplaneMode(airplaneMode);
      }
    });
  }
  if (!_lodash.default.isEmpty(setters)) {
    await _bluebird.default.all(setters);
  }
};
commands.mobileGetConnectivity = async function mobileGetConnectivity(opts = {}) {
  let {
    services = [WIFI_KEY_NAME, DATA_KEY_NAME, AIRPLANE_MODE_KEY_NAME]
  } = opts;
  if (!_lodash.default.isArray(services)) {
    services = [services];
  }
  const statePromises = {
    wifi: _bluebird.default.resolve(services.includes(WIFI_KEY_NAME) ? undefined : this.adb.isWifiOn()),
    data: _bluebird.default.resolve(services.includes(DATA_KEY_NAME) ? undefined : this.adb.isDataOn()),
    airplaneMode: _bluebird.default.resolve(services.includes(AIRPLANE_MODE_KEY_NAME) ? undefined : this.adb.isAirplaneModeOn())
  };
  await _bluebird.default.all(_lodash.default.values(statePromises));
  return _lodash.default.fromPairs(services.map(k => [k, statePromises[k].value()]));
};
commands.setNetworkConnection = async function setNetworkConnection(type) {
  this.log.info('Setting network connection');
  const shouldEnableAirplaneMode = (type & AIRPLANE_MODE_MASK) !== 0;
  const shouldEnableWifi = (type & WIFI_MASK) !== 0;
  const shouldEnableDataConnection = (type & DATA_MASK) !== 0;
  const currentState = await this.getNetworkConnection();
  const isAirplaneModeEnabled = (currentState & AIRPLANE_MODE_MASK) !== 0;
  const isWiFiEnabled = (currentState & WIFI_MASK) !== 0;
  const isDataEnabled = (currentState & DATA_MASK) !== 0;
  if (shouldEnableAirplaneMode !== isAirplaneModeEnabled) {
    await this.wrapBootstrapDisconnect(async () => {
      await this.adb.setAirplaneMode(shouldEnableAirplaneMode);
    });
    await this.wrapBootstrapDisconnect(async () => {
      if ((await this.adb.getApiLevel()) < 30) {
        await this.adb.broadcastAirplaneMode(shouldEnableAirplaneMode);
      }
    });
  } else {
    this.log.info(`Not changing airplane mode, since it is already ${shouldEnableAirplaneMode ? 'enabled' : 'disabled'}`);
  }
  if (shouldEnableWifi === isWiFiEnabled && shouldEnableDataConnection === isDataEnabled) {
    this.log.info('Not changing data connection/Wi-Fi states, since they are already set to expected values');
    if (await this.adb.isAirplaneModeOn()) {
      return AIRPLANE_MODE_MASK | currentState;
    }
    return ~AIRPLANE_MODE_MASK & currentState;
  }
  await this.wrapBootstrapDisconnect(async () => {
    if (shouldEnableWifi !== isWiFiEnabled) {
      await this.setWifiState(shouldEnableWifi);
    } else {
      this.log.info(`Not changing Wi-Fi state, since it is already ` + `${shouldEnableWifi ? 'enabled' : 'disabled'}`);
    }
    if (shouldEnableAirplaneMode) {
      this.log.info('Not changing data connection state, because airplane mode is enabled');
    } else if (shouldEnableDataConnection === isDataEnabled) {
      this.log.info(`Not changing data connection state, since it is already ` + `${shouldEnableDataConnection ? 'enabled' : 'disabled'}`);
    } else {
      await this.adb.setDataState(shouldEnableDataConnection, this.isEmulator());
    }
  });
  return await this.getNetworkConnection();
};
commands.setWifiState = async function setWifiState(wifi) {
  await this.adb.setWifiState(wifi, this.isEmulator());
};
commands.toggleData = async function toggleData() {
  let data = !(await this.adb.isDataOn());
  this.log.info(`Turning network data ${data ? 'on' : 'off'}`);
  await this.wrapBootstrapDisconnect(async () => {
    await this.adb.setWifiAndData({
      data
    }, this.isEmulator());
  });
};
commands.toggleWiFi = async function toggleWiFi() {
  let wifi = !(await this.adb.isWifiOn());
  this.log.info(`Turning WiFi ${wifi ? 'on' : 'off'}`);
  await this.wrapBootstrapDisconnect(async () => {
    await this.adb.setWifiAndData({
      wifi
    }, this.isEmulator());
  });
};
commands.toggleFlightMode = async function toggleFlightMode() {
  let flightMode = !(await this.adb.isAirplaneModeOn());
  this.log.info(`Turning flight mode ${flightMode ? 'on' : 'off'}`);
  await this.wrapBootstrapDisconnect(async () => {
    await this.adb.setAirplaneMode(flightMode);
  });
  await this.wrapBootstrapDisconnect(async () => {
    if ((await this.adb.getApiLevel()) < 30) {
      await this.adb.broadcastAirplaneMode(flightMode);
    }
  });
};
commands.setGeoLocation = async function setGeoLocation(location) {
  await this.adb.setGeoLocation(location, this.isEmulator());
  try {
    return await this.getGeoLocation();
  } catch (e) {
    this.log.warn(`Could not get the current geolocation info: ${e.message}`);
    this.log.warn(`Returning the default zero'ed values`);
    return {
      latitude: GEO_EPSILON,
      longitude: GEO_EPSILON,
      altitude: GEO_EPSILON
    };
  }
};
commands.mobileRefreshGpsCache = async function mobileRefreshGpsCache(opts = {}) {
  const {
    timeoutMs
  } = opts;
  await this.adb.refreshGeoLocationCache(timeoutMs);
};
commands.getGeoLocation = async function getGeoLocation() {
  const {
    latitude,
    longitude,
    altitude
  } = await this.adb.getGeoLocation();
  return {
    latitude: parseFloat(latitude) || GEO_EPSILON,
    longitude: parseFloat(longitude) || GEO_EPSILON,
    altitude: parseFloat(altitude) || GEO_EPSILON
  };
};
commands.isLocationServicesEnabled = async function iLocationServicesEnabled() {
  return (await this.adb.getLocationProviders()).includes('gps');
};
commands.toggleLocationServices = async function toggleLocationServices() {
  this.log.info('Toggling location services');
  const isGpsEnabled = await this.isLocationServicesEnabled();
  this.log.debug(`Current GPS state: ${isGpsEnabled}. ` + `The service is going to be ${isGpsEnabled ? 'disabled' : 'enabled'}`);
  await this.adb.toggleGPSLocationProvider(!isGpsEnabled);
};
helpers.wrapBootstrapDisconnect = async function wrapBootstrapDisconnect(wrapped) {
  if (!this.bootstrap) {
    return await wrapped();
  }
  this.bootstrap.ignoreUnexpectedShutdown = true;
  try {
    await wrapped();
    await this.adb.restart();
    await this.bootstrap.start(this.opts.appPackage, this.opts.disableAndroidWatchers, this.opts.acceptSslCerts);
  } finally {
    this.bootstrap.ignoreUnexpectedShutdown = false;
  }
};
Object.assign(extensions, commands, helpers);
var _default = extensions;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9kYXNoIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZHJpdmVyIiwiX2JsdWViaXJkIiwiY29tbWFuZHMiLCJoZWxwZXJzIiwiZXh0ZW5zaW9ucyIsImV4cG9ydHMiLCJBSVJQTEFORV9NT0RFX01BU0siLCJXSUZJX01BU0siLCJEQVRBX01BU0siLCJHRU9fRVBTSUxPTiIsIk51bWJlciIsIk1JTl9WQUxVRSIsIldJRklfS0VZX05BTUUiLCJEQVRBX0tFWV9OQU1FIiwiQUlSUExBTkVfTU9ERV9LRVlfTkFNRSIsImdldE5ldHdvcmtDb25uZWN0aW9uIiwibG9nIiwiaW5mbyIsImFpcnBsYW5lTW9kZU9uIiwiYWRiIiwiaXNBaXJwbGFuZU1vZGVPbiIsImNvbm5lY3Rpb24iLCJ3aWZpT24iLCJpc1dpZmlPbiIsImRhdGFPbiIsImlzRGF0YU9uIiwibW9iaWxlU2V0Q29ubmVjdGl2aXR5Iiwib3B0cyIsIndpZmkiLCJkYXRhIiwiYWlycGxhbmVNb2RlIiwiXyIsImV2ZXJ5IiwiaXNVbmRlZmluZWQiLCJlcnJvcnMiLCJJbnZhbGlkQXJndW1lbnRFcnJvciIsImN1cnJlbnRTdGF0ZSIsIm1vYmlsZUdldENvbm5lY3Rpdml0eSIsInNlcnZpY2VzIiwic2V0dGVycyIsIkJvb2xlYW4iLCJwdXNoIiwic2V0V2lmaVN0YXRlIiwiaXNFbXVsYXRvciIsInNldERhdGFTdGF0ZSIsInNldEFpcnBsYW5lTW9kZSIsImdldEFwaUxldmVsIiwiYnJvYWRjYXN0QWlycGxhbmVNb2RlIiwiaXNFbXB0eSIsIkIiLCJhbGwiLCJpc0FycmF5Iiwic3RhdGVQcm9taXNlcyIsInJlc29sdmUiLCJpbmNsdWRlcyIsInVuZGVmaW5lZCIsInZhbHVlcyIsImZyb21QYWlycyIsIm1hcCIsImsiLCJ2YWx1ZSIsInNldE5ldHdvcmtDb25uZWN0aW9uIiwidHlwZSIsInNob3VsZEVuYWJsZUFpcnBsYW5lTW9kZSIsInNob3VsZEVuYWJsZVdpZmkiLCJzaG91bGRFbmFibGVEYXRhQ29ubmVjdGlvbiIsImlzQWlycGxhbmVNb2RlRW5hYmxlZCIsImlzV2lGaUVuYWJsZWQiLCJpc0RhdGFFbmFibGVkIiwid3JhcEJvb3RzdHJhcERpc2Nvbm5lY3QiLCJ0b2dnbGVEYXRhIiwic2V0V2lmaUFuZERhdGEiLCJ0b2dnbGVXaUZpIiwidG9nZ2xlRmxpZ2h0TW9kZSIsImZsaWdodE1vZGUiLCJzZXRHZW9Mb2NhdGlvbiIsImxvY2F0aW9uIiwiZ2V0R2VvTG9jYXRpb24iLCJlIiwid2FybiIsIm1lc3NhZ2UiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImFsdGl0dWRlIiwibW9iaWxlUmVmcmVzaEdwc0NhY2hlIiwidGltZW91dE1zIiwicmVmcmVzaEdlb0xvY2F0aW9uQ2FjaGUiLCJwYXJzZUZsb2F0IiwiaXNMb2NhdGlvblNlcnZpY2VzRW5hYmxlZCIsImlMb2NhdGlvblNlcnZpY2VzRW5hYmxlZCIsImdldExvY2F0aW9uUHJvdmlkZXJzIiwidG9nZ2xlTG9jYXRpb25TZXJ2aWNlcyIsImlzR3BzRW5hYmxlZCIsImRlYnVnIiwidG9nZ2xlR1BTTG9jYXRpb25Qcm92aWRlciIsIndyYXBwZWQiLCJib290c3RyYXAiLCJpZ25vcmVVbmV4cGVjdGVkU2h1dGRvd24iLCJyZXN0YXJ0Iiwic3RhcnQiLCJhcHBQYWNrYWdlIiwiZGlzYWJsZUFuZHJvaWRXYXRjaGVycyIsImFjY2VwdFNzbENlcnRzIiwiT2JqZWN0IiwiYXNzaWduIiwiX2RlZmF1bHQiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vbGliL2NvbW1hbmRzL25ldHdvcmsuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGVycm9ycyB9IGZyb20gJ2FwcGl1bS9kcml2ZXInO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuXG5sZXQgY29tbWFuZHMgPSB7fSwgaGVscGVycyA9IHt9LCBleHRlbnNpb25zID0ge307XG5cbmNvbnN0IEFJUlBMQU5FX01PREVfTUFTSyA9IDBiMDAxO1xuY29uc3QgV0lGSV9NQVNLID0gMGIwMTA7XG5jb25zdCBEQVRBX01BU0sgPSAwYjEwMDtcbi8vIFRoZSB2YWx1ZSBjbG9zZSB0byB6ZXJvLCBidXQgbm90IHplcm8sIGlzIG5lZWRlZFxuLy8gdG8gdHJpY2sgSlNPTiBnZW5lcmF0aW9uIGFuZCBzZW5kIGEgZmxvYXQgdmFsdWUgaW5zdGVhZCBvZiBhbiBpbnRlZ2VyLFxuLy8gVGhpcyBhbGxvd3Mgc3RyaWN0bHktdHlwZWQgY2xpZW50cywgbGlrZSBKYXZhLCB0byBwcm9wZXJseVxuLy8gcGFyc2UgaXQuIE90aGVyd2lzZSBmbG9hdCAwLjAgaXMgYWx3YXlzIHJlcHJlc2VudGVkIGFzIGludGVnZXIgMCBpbiBKUy5cbi8vIFRoZSB2YWx1ZSBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gREJMX0VQU0lMT04gKGh0dHBzOi8vb3BlbnNvdXJjZS5hcHBsZS5jb20vc291cmNlL0xpYmMvTGliYy00OTgvaW5jbHVkZS9mbG9hdC5oKVxuY29uc3QgR0VPX0VQU0lMT04gPSBOdW1iZXIuTUlOX1ZBTFVFO1xuY29uc3QgV0lGSV9LRVlfTkFNRSA9ICd3aWZpJztcbmNvbnN0IERBVEFfS0VZX05BTUUgPSAnZGF0YSc7XG5jb25zdCBBSVJQTEFORV9NT0RFX0tFWV9OQU1FID0gJ2FpcnBsYW5lTW9kZSc7XG5cbmNvbW1hbmRzLmdldE5ldHdvcmtDb25uZWN0aW9uID0gYXN5bmMgZnVuY3Rpb24gZ2V0TmV0d29ya0Nvbm5lY3Rpb24gKCkge1xuICB0aGlzLmxvZy5pbmZvKCdHZXR0aW5nIG5ldHdvcmsgY29ubmVjdGlvbicpO1xuICBsZXQgYWlycGxhbmVNb2RlT24gPSBhd2FpdCB0aGlzLmFkYi5pc0FpcnBsYW5lTW9kZU9uKCk7XG4gIGxldCBjb25uZWN0aW9uID0gYWlycGxhbmVNb2RlT24gPyBBSVJQTEFORV9NT0RFX01BU0sgOiAwO1xuXG4gIC8vIG5vIG5lZWQgdG8gY2hlY2sgYW55dGhpbmcgZWxzZSBpZiB3ZSBhcmUgaW4gYWlycGxhbmUgbW9kZVxuICBpZiAoIWFpcnBsYW5lTW9kZU9uKSB7XG4gICAgbGV0IHdpZmlPbiA9IGF3YWl0IHRoaXMuaXNXaWZpT24oKTtcbiAgICBjb25uZWN0aW9uIHw9ICh3aWZpT24gPyBXSUZJX01BU0sgOiAwKTtcbiAgICBsZXQgZGF0YU9uID0gYXdhaXQgdGhpcy5hZGIuaXNEYXRhT24oKTtcbiAgICBjb25uZWN0aW9uIHw9IChkYXRhT24gPyBEQVRBX01BU0sgOiAwKTtcbiAgfVxuXG4gIHJldHVybiBjb25uZWN0aW9uO1xufTtcblxuLyoqXG4gKiBkZWNvdXBsaW5nIHRvIG92ZXJyaWRlIHRoZSBiZWhhdmlvdXIgaW4gb3RoZXIgZHJpdmVycyBsaWtlIFVpQXV0b21hdG9yMi5cbiAqL1xuY29tbWFuZHMuaXNXaWZpT24gPSBhc3luYyBmdW5jdGlvbiBpc1dpZmlPbiAoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmFkYi5pc1dpZmlPbigpO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTZXRDb25uZWN0aXZpdHlPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW4/fSB3aWZpIEVpdGhlciB0byBlbmFibGUgb3IgZGlzYWJsZSBXaS1GaS5cbiAqIEFuIHVuc2V0IHZhbHVlIG1lYW5zIHRvIG5vdCBjaGFuZ2UgdGhlIHN0YXRlIGZvciB0aGUgZ2l2ZW4gc2VydmljZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbj99IGRhdGEgRWl0aGVyIHRvIGVuYWJsZSBvciBkaXNhYmxlIG1vYmlsZSBkYXRhIGNvbm5lY3Rpb24uXG4gKiBBbiB1bnNldCB2YWx1ZSBtZWFucyB0byBub3QgY2hhbmdlIHRoZSBzdGF0ZSBmb3IgdGhlIGdpdmVuIHNlcnZpY2UuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW4/fSBhaXJwbGFuZU1vZGUgRWl0aGVyIHRvIGVuYWJsZSB0byBkaXNhYmxlIHRoZSBBaXJwbGFuZSBNb2RlXG4gKiBBbiB1bnNldCB2YWx1ZSBtZWFucyB0byBub3QgY2hhbmdlIHRoZSBzdGF0ZSBmb3IgdGhlIGdpdmVuIHNlcnZpY2UuXG4gKi9cblxuLyoqXG4gKiBTZXQgdGhlIGNvbm5lY3Rpdml0eSBzdGF0ZSBmb3IgZGlmZmVyZW50IHNlcnZpY2VzXG4gKlxuICogQHBhcmFtIHtTZXRDb25uZWN0aXZpdHlPcHRpb25zfSBvcHRzXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgbm9uZSBvZiBrbm93biBwcm9wZXJ0aWVzIHdlcmUgcHJvdmlkZWQgb3IgdGhlcmUgd2FzIGFuIGVycm9yXG4gKiB3aGlsZSBjaGFuZ2luZyBjb25uZWN0aXZpdHkgc3RhdGVzXG4gKi9cbmNvbW1hbmRzLm1vYmlsZVNldENvbm5lY3Rpdml0eSA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZVNldENvbm5lY3Rpdml0eSAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IHtcbiAgICB3aWZpLFxuICAgIGRhdGEsXG4gICAgYWlycGxhbmVNb2RlLFxuICB9ID0gb3B0cztcblxuICBpZiAoXy5ldmVyeShbd2lmaSwgZGF0YSwgYWlycGxhbmVNb2RlXSwgXy5pc1VuZGVmaW5lZCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLkludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgYEVpdGhlciBvbmUgb2YgWycke1dJRklfS0VZX05BTUV9JywgJyR7REFUQV9LRVlfTkFNRX0nLCAnJHtBSVJQTEFORV9NT0RFX0tFWV9OQU1FfSddIG9wdGlvbnMgbXVzdCBiZSBwcm92aWRlZGBcbiAgICApO1xuICB9XG5cbiAgY29uc3QgY3VycmVudFN0YXRlID0gYXdhaXQgdGhpcy5tb2JpbGVHZXRDb25uZWN0aXZpdHkoe1xuICAgIHNlcnZpY2VzOiBbXG4gICAgICAuLi4oXy5pc1VuZGVmaW5lZCh3aWZpKSA/IFtdIDogW1dJRklfS0VZX05BTUVdKSxcbiAgICAgIC4uLihfLmlzVW5kZWZpbmVkKGRhdGEpID8gW10gOiBbREFUQV9LRVlfTkFNRV0pLFxuICAgICAgLi4uKF8uaXNVbmRlZmluZWQoYWlycGxhbmVNb2RlKSA/IFtdIDogW0FJUlBMQU5FX01PREVfS0VZX05BTUVdKSxcbiAgICBdXG4gIH0pO1xuICBjb25zdCBzZXR0ZXJzID0gW107XG4gIGlmICghXy5pc1VuZGVmaW5lZCh3aWZpKSAmJiBjdXJyZW50U3RhdGUud2lmaSAhPT0gQm9vbGVhbih3aWZpKSkge1xuICAgIHNldHRlcnMucHVzaCh0aGlzLmFkYi5zZXRXaWZpU3RhdGUod2lmaSwgdGhpcy5pc0VtdWxhdG9yKCkpKTtcbiAgfVxuICBpZiAoIV8uaXNVbmRlZmluZWQoZGF0YSkgJiYgY3VycmVudFN0YXRlLmRhdGEgIT09IEJvb2xlYW4oZGF0YSkpIHtcbiAgICBzZXR0ZXJzLnB1c2godGhpcy5hZGIuc2V0RGF0YVN0YXRlKGRhdGEsIHRoaXMuaXNFbXVsYXRvcigpKSk7XG4gIH1cbiAgaWYgKCFfLmlzVW5kZWZpbmVkKGFpcnBsYW5lTW9kZSkgJiYgY3VycmVudFN0YXRlLmFpcnBsYW5lTW9kZSAhPT0gQm9vbGVhbihhaXJwbGFuZU1vZGUpKSB7XG4gICAgc2V0dGVycy5wdXNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuYWRiLnNldEFpcnBsYW5lTW9kZShhaXJwbGFuZU1vZGUpO1xuICAgICAgaWYgKHRoaXMuYWRiLmdldEFwaUxldmVsKCkgPCAzMCkge1xuICAgICAgICBhd2FpdCB0aGlzLmFkYi5icm9hZGNhc3RBaXJwbGFuZU1vZGUoYWlycGxhbmVNb2RlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBpZiAoIV8uaXNFbXB0eShzZXR0ZXJzKSkge1xuICAgIGF3YWl0IEIuYWxsKHNldHRlcnMpO1xuICB9XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEdldENvbm5lY3Rpdml0eVJlc3VsdFxuICogQHByb3BlcnR5IHtib29sZWFufSB3aWZpIFRydWUgaWYgd2lmaSBpcyBlbmFibGVkXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGRhdGEgVHJ1ZSBpZiBtb2JpbGUgZGF0YSBjb25uZWN0aW9uIGlzIGVuYWJsZWRcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gYWlycGxhbmVNb2RlIFRydWUgaWYgQWlycGxhbmUgTW9kZSBpcyBlbmFibGVkXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBHZXRDb25uZWN0aXZpdHlPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdfHN0cmluZz99IHNlcnZpY2VzIG9uZSBvciBtb3JlIHNlcnZpY2VzIHRvIGdldCB0aGUgY29ubmVjdGl2aXR5IGZvci5cbiAqIFN1cHBvcnRlZCBzZXJ2aWNlIG5hbWVzIGFyZTogd2lmaSwgZGF0YSwgYWlycGxhbmVNb2RlLlxuICovXG5cbi8qKlxuICogUmV0cmlldmVzIHRoZSBjb25uZWN0aXZpdHkgcHJvcGVydGllcyBmcm9tIHRoZSBkZXZpY2UgdW5kZXIgdGVzdFxuICpcbiAqIEBwYXJhbSB7R2V0Q29ubmVjdGl2aXR5T3B0aW9ucz99IG9wdHMgSWYgbm8gc2VydmljZSBuYW1lcyBhcmUgcHJvdmlkZWQgdGhlbiB0aGVcbiAqIGNvbm5lY3Rpdml0eSBzdGF0ZSBpcyByZXR1cm5lZCBmb3IgYWxsIG9mIHRoZW0uXG4gKiBAcmV0dXJucyB7R2V0Q29ubmVjdGl2aXR5UmVzdWx0fVxuICovXG5jb21tYW5kcy5tb2JpbGVHZXRDb25uZWN0aXZpdHkgPSBhc3luYyBmdW5jdGlvbiBtb2JpbGVHZXRDb25uZWN0aXZpdHkgKG9wdHMgPSB7fSkge1xuICBsZXQge1xuICAgIHNlcnZpY2VzID0gW1dJRklfS0VZX05BTUUsIERBVEFfS0VZX05BTUUsIEFJUlBMQU5FX01PREVfS0VZX05BTUVdLFxuICB9ID0gb3B0cztcbiAgaWYgKCFfLmlzQXJyYXkoc2VydmljZXMpKSB7XG4gICAgc2VydmljZXMgPSBbc2VydmljZXNdO1xuICB9XG5cbiAgY29uc3Qgc3RhdGVQcm9taXNlcyA9IHtcbiAgICB3aWZpOiBCLnJlc29sdmUoc2VydmljZXMuaW5jbHVkZXMoV0lGSV9LRVlfTkFNRSkgPyB1bmRlZmluZWQgOiB0aGlzLmFkYi5pc1dpZmlPbigpKSxcbiAgICBkYXRhOiBCLnJlc29sdmUoc2VydmljZXMuaW5jbHVkZXMoREFUQV9LRVlfTkFNRSkgPyB1bmRlZmluZWQgOiB0aGlzLmFkYi5pc0RhdGFPbigpKSxcbiAgICBhaXJwbGFuZU1vZGU6IEIucmVzb2x2ZShcbiAgICAgIHNlcnZpY2VzLmluY2x1ZGVzKEFJUlBMQU5FX01PREVfS0VZX05BTUUpID8gdW5kZWZpbmVkIDogdGhpcy5hZGIuaXNBaXJwbGFuZU1vZGVPbigpXG4gICAgKSxcbiAgfTtcbiAgYXdhaXQgQi5hbGwoXy52YWx1ZXMoc3RhdGVQcm9taXNlcykpO1xuICByZXR1cm4gXy5mcm9tUGFpcnMoc2VydmljZXMubWFwKChrKSA9PiBbaywgc3RhdGVQcm9taXNlc1trXS52YWx1ZSgpXSkpO1xufTtcblxuY29tbWFuZHMuc2V0TmV0d29ya0Nvbm5lY3Rpb24gPSBhc3luYyBmdW5jdGlvbiBzZXROZXR3b3JrQ29ubmVjdGlvbiAodHlwZSkge1xuICB0aGlzLmxvZy5pbmZvKCdTZXR0aW5nIG5ldHdvcmsgY29ubmVjdGlvbicpO1xuICAvLyBkZWNvZGUgdGhlIGlucHV0XG4gIGNvbnN0IHNob3VsZEVuYWJsZUFpcnBsYW5lTW9kZSA9ICh0eXBlICYgQUlSUExBTkVfTU9ERV9NQVNLKSAhPT0gMDtcbiAgY29uc3Qgc2hvdWxkRW5hYmxlV2lmaSA9ICh0eXBlICYgV0lGSV9NQVNLKSAhPT0gMDtcbiAgY29uc3Qgc2hvdWxkRW5hYmxlRGF0YUNvbm5lY3Rpb24gPSAodHlwZSAmIERBVEFfTUFTSykgIT09IDA7XG5cbiAgY29uc3QgY3VycmVudFN0YXRlID0gYXdhaXQgdGhpcy5nZXROZXR3b3JrQ29ubmVjdGlvbigpO1xuICBjb25zdCBpc0FpcnBsYW5lTW9kZUVuYWJsZWQgPSAoY3VycmVudFN0YXRlICYgQUlSUExBTkVfTU9ERV9NQVNLKSAhPT0gMDtcbiAgY29uc3QgaXNXaUZpRW5hYmxlZCA9IChjdXJyZW50U3RhdGUgJiBXSUZJX01BU0spICE9PSAwO1xuICBjb25zdCBpc0RhdGFFbmFibGVkID0gKGN1cnJlbnRTdGF0ZSAmIERBVEFfTUFTSykgIT09IDA7XG5cbiAgaWYgKHNob3VsZEVuYWJsZUFpcnBsYW5lTW9kZSAhPT0gaXNBaXJwbGFuZU1vZGVFbmFibGVkKSB7XG4gICAgYXdhaXQgdGhpcy53cmFwQm9vdHN0cmFwRGlzY29ubmVjdChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLmFkYi5zZXRBaXJwbGFuZU1vZGUoc2hvdWxkRW5hYmxlQWlycGxhbmVNb2RlKTtcbiAgICB9KTtcbiAgICBhd2FpdCB0aGlzLndyYXBCb290c3RyYXBEaXNjb25uZWN0KGFzeW5jICgpID0+IHtcbiAgICAgIGlmIChhd2FpdCB0aGlzLmFkYi5nZXRBcGlMZXZlbCgpIDwgMzApIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hZGIuYnJvYWRjYXN0QWlycGxhbmVNb2RlKHNob3VsZEVuYWJsZUFpcnBsYW5lTW9kZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5sb2cuaW5mbyhcbiAgICAgIGBOb3QgY2hhbmdpbmcgYWlycGxhbmUgbW9kZSwgc2luY2UgaXQgaXMgYWxyZWFkeSAke3Nob3VsZEVuYWJsZUFpcnBsYW5lTW9kZSA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCd9YFxuICAgICk7XG4gIH1cblxuICBpZiAoc2hvdWxkRW5hYmxlV2lmaSA9PT0gaXNXaUZpRW5hYmxlZCAmJiBzaG91bGRFbmFibGVEYXRhQ29ubmVjdGlvbiA9PT0gaXNEYXRhRW5hYmxlZCkge1xuICAgIHRoaXMubG9nLmluZm8oJ05vdCBjaGFuZ2luZyBkYXRhIGNvbm5lY3Rpb24vV2ktRmkgc3RhdGVzLCBzaW5jZSB0aGV5IGFyZSBhbHJlYWR5IHNldCB0byBleHBlY3RlZCB2YWx1ZXMnKTtcbiAgICBpZiAoYXdhaXQgdGhpcy5hZGIuaXNBaXJwbGFuZU1vZGVPbigpKSB7XG4gICAgICByZXR1cm4gQUlSUExBTkVfTU9ERV9NQVNLIHwgY3VycmVudFN0YXRlO1xuICAgIH1cbiAgICByZXR1cm4gfkFJUlBMQU5FX01PREVfTUFTSyAmIGN1cnJlbnRTdGF0ZTtcbiAgfVxuXG4gIGF3YWl0IHRoaXMud3JhcEJvb3RzdHJhcERpc2Nvbm5lY3QoYXN5bmMgKCkgPT4ge1xuICAgIGlmIChzaG91bGRFbmFibGVXaWZpICE9PSBpc1dpRmlFbmFibGVkKSB7XG4gICAgICBhd2FpdCB0aGlzLnNldFdpZmlTdGF0ZShzaG91bGRFbmFibGVXaWZpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5sb2cuaW5mbyhgTm90IGNoYW5naW5nIFdpLUZpIHN0YXRlLCBzaW5jZSBpdCBpcyBhbHJlYWR5IGAgK1xuICAgICAgICBgJHtzaG91bGRFbmFibGVXaWZpID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJ31gKTtcbiAgICB9XG5cbiAgICBpZiAoc2hvdWxkRW5hYmxlQWlycGxhbmVNb2RlKSB7XG4gICAgICB0aGlzLmxvZy5pbmZvKCdOb3QgY2hhbmdpbmcgZGF0YSBjb25uZWN0aW9uIHN0YXRlLCBiZWNhdXNlIGFpcnBsYW5lIG1vZGUgaXMgZW5hYmxlZCcpO1xuICAgIH0gZWxzZSBpZiAoc2hvdWxkRW5hYmxlRGF0YUNvbm5lY3Rpb24gPT09IGlzRGF0YUVuYWJsZWQpIHtcbiAgICAgIHRoaXMubG9nLmluZm8oYE5vdCBjaGFuZ2luZyBkYXRhIGNvbm5lY3Rpb24gc3RhdGUsIHNpbmNlIGl0IGlzIGFscmVhZHkgYCArXG4gICAgICAgIGAke3Nob3VsZEVuYWJsZURhdGFDb25uZWN0aW9uID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJ31gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy5hZGIuc2V0RGF0YVN0YXRlKHNob3VsZEVuYWJsZURhdGFDb25uZWN0aW9uLCB0aGlzLmlzRW11bGF0b3IoKSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gYXdhaXQgdGhpcy5nZXROZXR3b3JrQ29ubmVjdGlvbigpO1xufTtcblxuLyoqXG4gKiBkZWNvdXBsaW5nIHRvIG92ZXJyaWRlIGJlaGF2aW91ciBpbiBvdGhlciBkcml2ZXJzIGxpa2UgVWlBdXRvbWF0b3IyLlxuICovXG5jb21tYW5kcy5zZXRXaWZpU3RhdGUgPSBhc3luYyBmdW5jdGlvbiBzZXRXaWZpU3RhdGUgKHdpZmkpIHtcbiAgYXdhaXQgdGhpcy5hZGIuc2V0V2lmaVN0YXRlKHdpZmksIHRoaXMuaXNFbXVsYXRvcigpKTtcbn07XG5cbmNvbW1hbmRzLnRvZ2dsZURhdGEgPSBhc3luYyBmdW5jdGlvbiB0b2dnbGVEYXRhICgpIHtcbiAgbGV0IGRhdGEgPSAhKGF3YWl0IHRoaXMuYWRiLmlzRGF0YU9uKCkpO1xuICB0aGlzLmxvZy5pbmZvKGBUdXJuaW5nIG5ldHdvcmsgZGF0YSAke2RhdGEgPyAnb24nIDogJ29mZid9YCk7XG4gIGF3YWl0IHRoaXMud3JhcEJvb3RzdHJhcERpc2Nvbm5lY3QoYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IHRoaXMuYWRiLnNldFdpZmlBbmREYXRhKHtkYXRhfSwgdGhpcy5pc0VtdWxhdG9yKCkpO1xuICB9KTtcbn07XG5cbmNvbW1hbmRzLnRvZ2dsZVdpRmkgPSBhc3luYyBmdW5jdGlvbiB0b2dnbGVXaUZpICgpIHtcbiAgbGV0IHdpZmkgPSAhKGF3YWl0IHRoaXMuYWRiLmlzV2lmaU9uKCkpO1xuICB0aGlzLmxvZy5pbmZvKGBUdXJuaW5nIFdpRmkgJHt3aWZpID8gJ29uJyA6ICdvZmYnfWApO1xuICBhd2FpdCB0aGlzLndyYXBCb290c3RyYXBEaXNjb25uZWN0KGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCB0aGlzLmFkYi5zZXRXaWZpQW5kRGF0YSh7d2lmaX0sIHRoaXMuaXNFbXVsYXRvcigpKTtcbiAgfSk7XG59O1xuXG5jb21tYW5kcy50b2dnbGVGbGlnaHRNb2RlID0gYXN5bmMgZnVuY3Rpb24gdG9nZ2xlRmxpZ2h0TW9kZSAoKSB7XG4gIC8qXG4gICAqIFRPRE86IEltcGxlbWVudCBpc1JlYWxEZXZpY2UoKS4gVGhpcyBtZXRob2QgZmFpbHMgb25cbiAgICogcmVhbCBkZXZpY2VzLCBpdCBzaG91bGQgdGhyb3cgYSBOb3RZZXRJbXBsZW1lbnRlZEVycm9yXG4gICAqL1xuICBsZXQgZmxpZ2h0TW9kZSA9ICEoYXdhaXQgdGhpcy5hZGIuaXNBaXJwbGFuZU1vZGVPbigpKTtcbiAgdGhpcy5sb2cuaW5mbyhgVHVybmluZyBmbGlnaHQgbW9kZSAke2ZsaWdodE1vZGUgPyAnb24nIDogJ29mZid9YCk7XG4gIGF3YWl0IHRoaXMud3JhcEJvb3RzdHJhcERpc2Nvbm5lY3QoYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IHRoaXMuYWRiLnNldEFpcnBsYW5lTW9kZShmbGlnaHRNb2RlKTtcbiAgfSk7XG4gIGF3YWl0IHRoaXMud3JhcEJvb3RzdHJhcERpc2Nvbm5lY3QoYXN5bmMgKCkgPT4ge1xuICAgIGlmIChhd2FpdCB0aGlzLmFkYi5nZXRBcGlMZXZlbCgpIDwgMzApIHtcbiAgICAgIGF3YWl0IHRoaXMuYWRiLmJyb2FkY2FzdEFpcnBsYW5lTW9kZShmbGlnaHRNb2RlKTtcbiAgICB9XG4gIH0pO1xufTtcblxuY29tbWFuZHMuc2V0R2VvTG9jYXRpb24gPSBhc3luYyBmdW5jdGlvbiBzZXRHZW9Mb2NhdGlvbiAobG9jYXRpb24pIHtcbiAgYXdhaXQgdGhpcy5hZGIuc2V0R2VvTG9jYXRpb24obG9jYXRpb24sIHRoaXMuaXNFbXVsYXRvcigpKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRHZW9Mb2NhdGlvbigpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhpcy5sb2cud2FybihgQ291bGQgbm90IGdldCB0aGUgY3VycmVudCBnZW9sb2NhdGlvbiBpbmZvOiAke2UubWVzc2FnZX1gKTtcbiAgICB0aGlzLmxvZy53YXJuKGBSZXR1cm5pbmcgdGhlIGRlZmF1bHQgemVybydlZCB2YWx1ZXNgKTtcbiAgICByZXR1cm4ge1xuICAgICAgbGF0aXR1ZGU6IEdFT19FUFNJTE9OLFxuICAgICAgbG9uZ2l0dWRlOiBHRU9fRVBTSUxPTixcbiAgICAgIGFsdGl0dWRlOiBHRU9fRVBTSUxPTixcbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEdwc0NhY2hlUmVmcmVzaE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0aW1lb3V0TXMgWzIwMDAwXSBUaGUgbWF4aW11bSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzXG4gKiB0byBibG9jayB1bnRpbCBHUFMgY2FjaGUgaXMgcmVmcmVzaGVkLiBQcm92aWRpbmcgemVybyBvciBhIG5lZ2F0aXZlXG4gKiB2YWx1ZSB0byBpdCBza2lwcyB3YWl0aW5nIGNvbXBsZXRlbHkuXG4gKi9cblxuLyoqXG4gKiBTZW5kcyBhbiBhc3luYyByZXF1ZXN0IHRvIHJlZnJlc2ggdGhlIEdQUyBjYWNoZS5cbiAqIFRoaXMgZmVhdHVyZSBvbmx5IHdvcmtzIGlmIHRoZSBkZXZpY2UgdW5kZXIgdGVzdCBoYXNcbiAqIEdvb2dsZSBQbGF5IFNlcnZpY2VzIGluc3RhbGxlZC4gSW4gY2FzZSB0aGUgdmFuaWxsYVxuICogTG9jYXRpb25NYW5hZ2VyIGlzIHVzZWQgdGhlIGRldmljZSBBUEkgbGV2ZWwgbXVzdCBiZSBhdFxuICogdmVyc2lvbiAzMCAoQW5kcm9pZCBSKSBvciBoaWdoZXIuXG4gKlxuICogQHBhcmFtIHtHcHNDYWNoZVJlZnJlc2hPcHRpb25zfSBvcHRzXG4gKi9cbmNvbW1hbmRzLm1vYmlsZVJlZnJlc2hHcHNDYWNoZSA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZVJlZnJlc2hHcHNDYWNoZSAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IHsgdGltZW91dE1zIH0gPSBvcHRzO1xuICBhd2FpdCB0aGlzLmFkYi5yZWZyZXNoR2VvTG9jYXRpb25DYWNoZSh0aW1lb3V0TXMpO1xufTtcblxuY29tbWFuZHMuZ2V0R2VvTG9jYXRpb24gPSBhc3luYyBmdW5jdGlvbiBnZXRHZW9Mb2NhdGlvbiAoKSB7XG4gIGNvbnN0IHtsYXRpdHVkZSwgbG9uZ2l0dWRlLCBhbHRpdHVkZX0gPSBhd2FpdCB0aGlzLmFkYi5nZXRHZW9Mb2NhdGlvbigpO1xuICByZXR1cm4ge1xuICAgIGxhdGl0dWRlOiBwYXJzZUZsb2F0KGxhdGl0dWRlKSB8fCBHRU9fRVBTSUxPTixcbiAgICBsb25naXR1ZGU6IHBhcnNlRmxvYXQobG9uZ2l0dWRlKSB8fCBHRU9fRVBTSUxPTixcbiAgICBhbHRpdHVkZTogcGFyc2VGbG9hdChhbHRpdHVkZSkgfHwgR0VPX0VQU0lMT04sXG4gIH07XG59O1xuXG4vKipcbiAqIENoZWNrcyBpZiBHUFMgaXMgZW5hYmxlZFxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlPEJvb2xlYW4+fSBUcnVlIGlmIHllc1xuICovXG5jb21tYW5kcy5pc0xvY2F0aW9uU2VydmljZXNFbmFibGVkID0gYXN5bmMgZnVuY3Rpb24gaUxvY2F0aW9uU2VydmljZXNFbmFibGVkICgpIHtcbiAgcmV0dXJuIChhd2FpdCB0aGlzLmFkYi5nZXRMb2NhdGlvblByb3ZpZGVycygpKS5pbmNsdWRlcygnZ3BzJyk7XG59O1xuXG4vKipcbiAqIFRvZ2dsZXMgR1BTIHN0YXRlXG4gKi9cbmNvbW1hbmRzLnRvZ2dsZUxvY2F0aW9uU2VydmljZXMgPSBhc3luYyBmdW5jdGlvbiB0b2dnbGVMb2NhdGlvblNlcnZpY2VzICgpIHtcbiAgdGhpcy5sb2cuaW5mbygnVG9nZ2xpbmcgbG9jYXRpb24gc2VydmljZXMnKTtcbiAgY29uc3QgaXNHcHNFbmFibGVkID0gYXdhaXQgdGhpcy5pc0xvY2F0aW9uU2VydmljZXNFbmFibGVkKCk7XG4gIHRoaXMubG9nLmRlYnVnKFxuICAgIGBDdXJyZW50IEdQUyBzdGF0ZTogJHtpc0dwc0VuYWJsZWR9LiBgICtcbiAgICBgVGhlIHNlcnZpY2UgaXMgZ29pbmcgdG8gYmUgJHtpc0dwc0VuYWJsZWQgPyAnZGlzYWJsZWQnIDogJ2VuYWJsZWQnfWBcbiAgKTtcbiAgYXdhaXQgdGhpcy5hZGIudG9nZ2xlR1BTTG9jYXRpb25Qcm92aWRlcighaXNHcHNFbmFibGVkKTtcbn07XG5cbmhlbHBlcnMud3JhcEJvb3RzdHJhcERpc2Nvbm5lY3QgPSBhc3luYyBmdW5jdGlvbiB3cmFwQm9vdHN0cmFwRGlzY29ubmVjdCAod3JhcHBlZCkge1xuICBpZiAoIXRoaXMuYm9vdHN0cmFwKSB7XG4gICAgcmV0dXJuIGF3YWl0IHdyYXBwZWQoKTtcbiAgfVxuXG4gIHRoaXMuYm9vdHN0cmFwLmlnbm9yZVVuZXhwZWN0ZWRTaHV0ZG93biA9IHRydWU7XG4gIHRyeSB7XG4gICAgYXdhaXQgd3JhcHBlZCgpO1xuICAgIGF3YWl0IHRoaXMuYWRiLnJlc3RhcnQoKTtcbiAgICBhd2FpdCB0aGlzLmJvb3RzdHJhcC5zdGFydCh0aGlzLm9wdHMuYXBwUGFja2FnZSwgdGhpcy5vcHRzLmRpc2FibGVBbmRyb2lkV2F0Y2hlcnMsIHRoaXMub3B0cy5hY2NlcHRTc2xDZXJ0cyk7XG4gIH0gZmluYWxseSB7XG4gICAgdGhpcy5ib290c3RyYXAuaWdub3JlVW5leHBlY3RlZFNodXRkb3duID0gZmFsc2U7XG4gIH1cbn07XG5cbk9iamVjdC5hc3NpZ24oZXh0ZW5zaW9ucywgY29tbWFuZHMsIGhlbHBlcnMpO1xuZXhwb3J0IHsgY29tbWFuZHMsIGhlbHBlcnMgfTtcbmV4cG9ydCBkZWZhdWx0IGV4dGVuc2lvbnM7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsU0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBRUEsSUFBSUcsUUFBUSxHQUFHLENBQUMsQ0FBQztFQUFFQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO0VBQUVDLFVBQVUsR0FBRyxDQUFDLENBQUM7QUFBQ0MsT0FBQSxDQUFBRixPQUFBLEdBQUFBLE9BQUE7QUFBQUUsT0FBQSxDQUFBSCxRQUFBLEdBQUFBLFFBQUE7QUFFakQsTUFBTUksa0JBQWtCLEdBQUcsS0FBSztBQUNoQyxNQUFNQyxTQUFTLEdBQUcsS0FBSztBQUN2QixNQUFNQyxTQUFTLEdBQUcsS0FBSztBQU12QixNQUFNQyxXQUFXLEdBQUdDLE1BQU0sQ0FBQ0MsU0FBUztBQUNw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