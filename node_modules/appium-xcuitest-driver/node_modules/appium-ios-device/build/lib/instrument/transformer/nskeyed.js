"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.XCTestConfiguration = exports.NSUUID = exports.NSURL = exports.NSDate = exports.BaseArchiveHandler = void 0;
exports.archive = archive;
exports.unarchive = unarchive;
exports.updateNSKeyedArchiveClass = updateNSKeyedArchiveClass;
require("source-map-support/register");
var _bplistParser = _interopRequireDefault(require("bplist-parser"));
var _bplistCreator = _interopRequireDefault(require("bplist-creator"));
var _uuid = require("uuid");
var _lodash = _interopRequireDefault(require("lodash"));
const NSKEYED_ARCHIVE_VERSION = 100_000;
const NULL_UID = new _bplistParser.default.UID(0);
const CYCLE_TOKEN = 'CycleToken';
const PRIMITIVE_TYPES = ['Number', 'String', 'Boolean', 'UID', 'Buffer'];
const NON_ENCODABLE_TYPES = ['number', 'boolean'];
const NSKEYEDARCHIVER = 'NSKeyedArchiver';
const UNIX2APPLE_TIMESTAMP_SECOND = 978307200;
const FORMAT_VERSION = 'formatVersion';
const NS_OBJECT = 'NSObject';
class ArchivedObject {
  constructor(object, unarchiver) {
    this.object = object;
    this._unarchiver = unarchiver;
  }
  decodeIndex(index) {
    return this._unarchiver.decodeObject(index);
  }
  decode(key) {
    return this._unarchiver.decodeKey(this.object, key);
  }
}
class ArchivingObject {
  constructor(object, archiver) {
    this._archiveObj = object;
    this._archiver = archiver;
  }
  encode(key, val) {
    this._archiveObj[key] = this._archiver.encode(val);
  }
}
class BaseArchiveHandler {
  additionClasses = [];
  decodeArchive(archive) {
    throw new Error(`Did not know how to decode the object`);
  }
  encodeArchive(obj, archive) {
    throw new Error(`Did not know how to encode the object`);
  }
}
exports.BaseArchiveHandler = BaseArchiveHandler;
class DictArchive extends BaseArchiveHandler {
  decodeArchive(archive) {
    const keyUids = archive.decode('NS.keys');
    const valUids = archive.decode('NS.objects');
    const d = {};
    for (let i = 0; i < keyUids.length; i++) {
      const key = archive.decodeIndex(keyUids[i]);
      d[key] = archive.decodeIndex(valUids[i]);
    }
    return d;
  }
}
class ListArchive extends BaseArchiveHandler {
  decodeArchive(archive) {
    const uids = archive.decode('NS.objects');
    return uids.map(archive.decodeIndex.bind(archive));
  }
}
class DTTapMessagePlist extends BaseArchiveHandler {
  decodeArchive(archive) {
    return archive.decode('DTTapMessagePlist');
  }
}
class NSError extends BaseArchiveHandler {
  decodeArchive(archive) {
    return {
      $class: 'NSError',
      domain: archive.decode('NSDomain'),
      userinfo: archive.decode('NSUserInfo'),
      code: archive.decode('NSCode')
    };
  }
}
class NSException extends BaseArchiveHandler {
  decodeArchive(archive) {
    return {
      $class: 'NSException',
      reason: archive.decode('NS.reason'),
      userinfo: archive.decode('userinfo'),
      name: archive.decode('NS.name')
    };
  }
}
class NSURL extends BaseArchiveHandler {
  constructor(base, relative) {
    super();
    this._base = base;
    this._relative = relative;
    this.additionClasses = [NS_OBJECT];
  }
  decodeArchive(archive) {
    return {
      $class: 'NSURL',
      base: archive.decode('NS.base'),
      relative: archive.decode('NS.relative')
    };
  }
  encodeArchive(obj, archive) {
    archive.encode('NS.base', obj._base);
    archive.encode('NS.relative', obj._relative);
  }
}
exports.NSURL = NSURL;
class NSDate extends BaseArchiveHandler {
  constructor(data) {
    super();
    this._data = data;
  }
  decodeArchive(archive) {
    return UNIX2APPLE_TIMESTAMP_SECOND + archive.decode('NS.time');
  }
  encodeArchive(obj, archive) {
    archive.encode('NS.time', obj._data - UNIX2APPLE_TIMESTAMP_SECOND);
  }
}
exports.NSDate = NSDate;
class NSMutableString extends BaseArchiveHandler {
  decodeArchive(archive) {
    return archive.decode('NS.string');
  }
}
class NSMutableData extends BaseArchiveHandler {
  decodeArchive(archive) {
    return archive.decode('NS.data');
  }
}
class NSUUID extends BaseArchiveHandler {
  constructor(data) {
    super();
    this._data = data;
    this.additionClasses = [NS_OBJECT];
  }
  decodeArchive(archive) {
    return (0, _uuid.stringify)(archive.decode('NS.uuidbytes'));
  }
  encodeArchive(obj, archive) {
    archive._archiveObj['NS.uuidbytes'] = Buffer.from((0, _uuid.parse)(obj._data).buffer);
  }
}
exports.NSUUID = NSUUID;
class XCTCapabilities extends BaseArchiveHandler {
  decodeArchive(archive) {
    return archive.decode('capabilities-dictionary');
  }
}
class NSIgnore extends BaseArchiveHandler {
  decodeArchive() {
    return null;
  }
}
class NSNull extends BaseArchiveHandler {
  constructor() {
    super();
    this.additionClasses = [NS_OBJECT];
  }
  decodeArchive() {
    return null;
  }
}
class XCTestConfiguration extends BaseArchiveHandler {
  static _default = {
    aggregateStatisticsBeforeCrash: {
      XCSuiteRecordsKey: {}
    },
    automationFrameworkPath: '/Developer/Library/PrivateFrameworks/XCTAutomationSupport.framework',
    baselineFileRelativePath: undefined,
    baselineFileURL: undefined,
    defaultTestExecutionTimeAllowance: undefined,
    disablePerformanceMetrics: false,
    emitOSLogs: false,
    formatVersion: 2,
    gatherLocalizableStringsData: false,
    initializeForUITesting: true,
    maximumTestExecutionTimeAllowance: undefined,
    productModuleName: 'WebDriverAgentRunner',
    randomExecutionOrderingSeed: undefined,
    reportActivities: true,
    reportResultsToIDE: true,
    systemAttachmentLifetime: 2,
    targetApplicationArguments: [],
    targetApplicationBundleID: undefined,
    targetApplicationEnvironment: undefined,
    targetApplicationPath: '/KEEP-THIS-NOT-EMPTY/KEEP-THIS-NOT-EMPTY',
    testApplicationDependencies: {},
    testApplicationUserOverrides: undefined,
    testBundleRelativePath: undefined,
    testExecutionOrdering: 0,
    testTimeoutsEnabled: false,
    testsDrivenByIDE: false,
    testsMustRunOnMainThread: true,
    testsToRun: undefined,
    testsToSkip: undefined,
    treatMissingBaselinesAsFailures: false,
    userAttachmentLifetime: 1
  };
  constructor(data) {
    super();
    if (!data.testBundleURL) {
      throw new TypeError('testBundleURL cannot be empty');
    }
    if (!data.sessionIdentifier) {
      throw new TypeError('sessionIdentifier cannot be empty');
    }
    if (typeof data.testBundleURL === 'string') {
      data.testBundleURL = new NSURL(undefined, data.testBundleURL);
    }
    if (!(data.testBundleURL instanceof NSURL)) {
      throw new TypeError(`Expected testBundleURL to be a valid NSURL instance, got ${data.testBundleURL.constructor.name} instead`);
    }
    if (typeof data.sessionIdentifier === 'string') {
      data.sessionIdentifier = new NSUUID(data.sessionIdentifier);
    }
    if (!(data.sessionIdentifier instanceof NSUUID)) {
      throw new TypeError(`Expected sessionIdentifier to be a valid NSUUID instance, got ${data.sessionIdentifier.constructor.name} instead`);
    }
    this._data = {
      ...XCTestConfiguration._default,
      ...data
    };
  }
  getBytes() {
    return archive(this);
  }
}
exports.XCTestConfiguration = XCTestConfiguration;
class XCActivityRecord extends BaseArchiveHandler {
  static _keys = ['activityType', 'attachments', 'finish', 'start', 'title', 'uuid'];
  decodeArchive(archive) {
    return XCActivityRecord._keys.reduce((acc, key) => {
      acc[key] = archive.decode(key);
      return acc;
    }, {});
  }
}
const UNARCHIVE_CLASS_MAP = {
  DTTapMessagePlist,
  DTSysmonTapMessage: DTTapMessagePlist,
  DTTapHeartbeatMessage: DTTapMessagePlist,
  DTTapMessageArchive: DTTapMessagePlist,
  DTKTraceTapMessage: DTTapMessagePlist,
  ErrorArchive: NSError,
  ExceptionArchive: NSException,
  NSDictionary: DictArchive,
  NSMutableDictionary: DictArchive,
  NSArray: ListArchive,
  NSMutableArray: ListArchive,
  NSMutableSet: ListArchive,
  NSSet: ListArchive,
  NSDate,
  NSError,
  NSException,
  NSMutableString,
  NSMutableData,
  NSNull,
  NSUUID,
  NSURL,
  XCActivityRecord,
  XCTCapabilities,
  XCTestConfiguration
};
class Unarchive {
  constructor(inputBytes) {
    this.input = inputBytes;
    this.unpackedUids = {};
    this.topUID = NULL_UID;
    this.objects = [];
  }
  unpackArchiveHeader() {
    const plist = _bplistParser.default.parseBuffer(this.input)[0];
    if (plist.$archiver !== NSKEYEDARCHIVER) {
      throw new Error(`unsupported encoder: ${plist.$archiver}`);
    }
    if (plist.$version !== NSKEYED_ARCHIVE_VERSION) {
      throw new Error(`expected ${NSKEYED_ARCHIVE_VERSION}, got ${plist.$version}`);
    }
    const top = plist.$top;
    const topUID = top.root;
    if (!topUID) {
      throw new Error(`top object did not have a UID! dump: ${JSON.stringify(top)}`);
    }
    this.topUID = topUID;
    this.objects = plist.$objects;
  }
  classForUid(index) {
    const meta = this.objects[index.UID];
    const name = meta.$classname;
    const klass = UNARCHIVE_CLASS_MAP[name] ?? NSIgnore;
    return klass;
  }
  decodeKey(obj, key) {
    const val = obj[key];
    return _lodash.default.isNil(val === null || val === void 0 ? void 0 : val.UID) ? val : this.decodeObject(val);
  }
  decodeObject(index) {
    if (index === NULL_UID) {
      return null;
    }
    const obj = this.unpackedUids[index];
    if (obj === CYCLE_TOKEN) {
      throw new Error(`archive has a cycle with ${index}`);
    }
    if (!_lodash.default.isUndefined(obj)) {
      return obj;
    }
    const rawObj = this.objects[index.UID];
    this.unpackedUids[index.UID] = CYCLE_TOKEN;
    if (!(rawObj !== null && rawObj !== void 0 && rawObj.$class)) {
      this.unpackedUids[index.UID] = obj;
      return rawObj;
    }
    const klass = this.classForUid(rawObj.$class);
    const klassObj = new klass().decodeArchive(new ArchivedObject(rawObj, this));
    this.unpackedUids[index.UID] = klassObj;
    return klassObj;
  }
  toObject() {
    this.unpackArchiveHeader();
    return this.decodeObject(this.topUID);
  }
}
class Archive {
  constructor(inputObject) {
    this.input = inputObject;
    this.objects = ['$null'];
  }
  uidForArchiver(archiver, ...addition) {
    const val = new _bplistParser.default.UID(this.objects.length);
    this.objects.push({
      $classes: [archiver, ...addition],
      $classname: archiver
    });
    return val;
  }
  archive(obj) {
    if (_lodash.default.isUndefined(obj) || _lodash.default.isNull(obj)) {
      return NULL_UID;
    }
    const index = new _bplistParser.default.UID(this.objects.length);
    if (PRIMITIVE_TYPES.includes(obj.constructor.name)) {
      this.objects.push(obj);
      return index;
    }
    const archiveObj = {};
    this.objects.push(archiveObj);
    this.encodeTopLevel(obj, archiveObj);
    return index;
  }
  encode(val) {
    if (NON_ENCODABLE_TYPES.includes(typeof val)) {
      return val;
    }
    return this.archive(val);
  }
  encodeTopLevel(obj, archiveObj) {
    if (obj instanceof Array) {
      return this.encodeArray(obj, archiveObj);
    } else if (obj instanceof Set) {
      return this.encodeSet(obj, archiveObj);
    } else if (obj instanceof XCTestConfiguration) {
      return this.encodeXCTestConfiguration(obj, archiveObj);
    } else if (obj instanceof Object) {
      const objName = obj.constructor.name;
      if (objName in UNARCHIVE_CLASS_MAP) {
        obj.encodeArchive(obj, new ArchivingObject(archiveObj, this));
        archiveObj.$class = this.uidForArchiver(objName, ...(obj.additionClasses ?? []));
      } else {
        return this.encodeDict(obj, archiveObj);
      }
    } else {
      throw Error(`Unable to encode types: ${typeof obj}`);
    }
  }
  encodeArray(objs, archiveObj) {
    archiveObj.$class = this.uidForArchiver('NSArray', NS_OBJECT);
    archiveObj['NS.objects'] = objs.map(this.archive.bind(this));
  }
  encodeSet(objs, archiveObj) {
    archiveObj.$class = this.uidForArchiver('NSSet', NS_OBJECT);
    archiveObj['NS.objects'] = objs.map(this.archive.bind(this));
  }
  encodeDict(obj, archiveObj) {
    archiveObj['NS.keys'] = _lodash.default.keys(obj).map(this.archive.bind(this));
    archiveObj['NS.objects'] = _lodash.default.values(obj).map(this.archive.bind(this));
    archiveObj.$class = this.uidForArchiver('NSDictionary', NS_OBJECT);
  }
  encodeXCTestConfiguration(obj, archiveObj) {
    archiveObj.$class = this.uidForArchiver('XCTestConfiguration', NS_OBJECT);
    _lodash.default.entries(obj._data).forEach(([key, value]) => archiveObj[key] = key === FORMAT_VERSION ? this.archive(value) : this.encode(value));
  }
  toBytes() {
    if (this.objects.length === 1) {
      this.archive(this.input);
    }
    const d = {
      $version: NSKEYED_ARCHIVE_VERSION,
      $archiver: NSKEYEDARCHIVER,
      $top: {
        root: new _bplistParser.default.UID(1)
      },
      $objects: this.objects
    };
    return (0, _bplistCreator.default)(d);
  }
}
function archive(inputObject) {
  return new Archive(inputObject).toBytes();
}
function unarchive(inputBytes) {
  return new Unarchive(inputBytes).toObject();
}
function updateNSKeyedArchiveClass(name, subClass) {
  var _subClass$prototype, _subClass$prototype2;
  if (!_lodash.default.isFunction((_subClass$prototype = subClass.prototype) === null || _subClass$prototype === void 0 ? void 0 : _subClass$prototype.decodeArchive) && !_lodash.default.isFunction((_subClass$prototype2 = subClass.prototype) === null || _subClass$prototype2 === void 0 ? void 0 : _subClass$prototype2.encodeArchive)) {
    throw Error('subClass must have decodeArchive or encodeArchive methods');
  }
  if (!(name in UNARCHIVE_CLASS_MAP)) {
    UNARCHIVE_CLASS_MAP[name] = subClass;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYnBsaXN0UGFyc2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYnBsaXN0Q3JlYXRvciIsIl91dWlkIiwiX2xvZGFzaCIsIk5TS0VZRURfQVJDSElWRV9WRVJTSU9OIiwiTlVMTF9VSUQiLCJwbGlzdGxpYiIsIlVJRCIsIkNZQ0xFX1RPS0VOIiwiUFJJTUlUSVZFX1RZUEVTIiwiTk9OX0VOQ09EQUJMRV9UWVBFUyIsIk5TS0VZRURBUkNISVZFUiIsIlVOSVgyQVBQTEVfVElNRVNUQU1QX1NFQ09ORCIsIkZPUk1BVF9WRVJTSU9OIiwiTlNfT0JKRUNUIiwiQXJjaGl2ZWRPYmplY3QiLCJjb25zdHJ1Y3RvciIsIm9iamVjdCIsInVuYXJjaGl2ZXIiLCJfdW5hcmNoaXZlciIsImRlY29kZUluZGV4IiwiaW5kZXgiLCJkZWNvZGVPYmplY3QiLCJkZWNvZGUiLCJrZXkiLCJkZWNvZGVLZXkiLCJBcmNoaXZpbmdPYmplY3QiLCJhcmNoaXZlciIsIl9hcmNoaXZlT2JqIiwiX2FyY2hpdmVyIiwiZW5jb2RlIiwidmFsIiwiQmFzZUFyY2hpdmVIYW5kbGVyIiwiYWRkaXRpb25DbGFzc2VzIiwiZGVjb2RlQXJjaGl2ZSIsImFyY2hpdmUiLCJFcnJvciIsImVuY29kZUFyY2hpdmUiLCJvYmoiLCJleHBvcnRzIiwiRGljdEFyY2hpdmUiLCJrZXlVaWRzIiwidmFsVWlkcyIsImQiLCJpIiwibGVuZ3RoIiwiTGlzdEFyY2hpdmUiLCJ1aWRzIiwibWFwIiwiYmluZCIsIkRUVGFwTWVzc2FnZVBsaXN0IiwiTlNFcnJvciIsIiRjbGFzcyIsImRvbWFpbiIsInVzZXJpbmZvIiwiY29kZSIsIk5TRXhjZXB0aW9uIiwicmVhc29uIiwibmFtZSIsIk5TVVJMIiwiYmFzZSIsInJlbGF0aXZlIiwiX2Jhc2UiLCJfcmVsYXRpdmUiLCJOU0RhdGUiLCJkYXRhIiwiX2RhdGEiLCJOU011dGFibGVTdHJpbmciLCJOU011dGFibGVEYXRhIiwiTlNVVUlEIiwidXVpZFN0cmluZ2lmeSIsIkJ1ZmZlciIsImZyb20iLCJ1dWlkUGFyc2UiLCJidWZmZXIiLCJYQ1RDYXBhYmlsaXRpZXMiLCJOU0lnbm9yZSIsIk5TTnVsbCIsIlhDVGVzdENvbmZpZ3VyYXRpb24iLCJfZGVmYXVsdCIsImFnZ3JlZ2F0ZVN0YXRpc3RpY3NCZWZvcmVDcmFzaCIsIlhDU3VpdGVSZWNvcmRzS2V5IiwiYXV0b21hdGlvbkZyYW1ld29ya1BhdGgiLCJiYXNlbGluZUZpbGVSZWxhdGl2ZVBhdGgiLCJ1bmRlZmluZWQiLCJiYXNlbGluZUZpbGVVUkwiLCJkZWZhdWx0VGVzdEV4ZWN1dGlvblRpbWVBbGxvd2FuY2UiLCJkaXNhYmxlUGVyZm9ybWFuY2VNZXRyaWNzIiwiZW1pdE9TTG9ncyIsImZvcm1hdFZlcnNpb24iLCJnYXRoZXJMb2NhbGl6YWJsZVN0cmluZ3NEYXRhIiwiaW5pdGlhbGl6ZUZvclVJVGVzdGluZyIsIm1heGltdW1UZXN0RXhlY3V0aW9uVGltZUFsbG93YW5jZSIsInByb2R1Y3RNb2R1bGVOYW1lIiwicmFuZG9tRXhlY3V0aW9uT3JkZXJpbmdTZWVkIiwicmVwb3J0QWN0aXZpdGllcyIsInJlcG9ydFJlc3VsdHNUb0lERSIsInN5c3RlbUF0dGFjaG1lbnRMaWZldGltZSIsInRhcmdldEFwcGxpY2F0aW9uQXJndW1lbnRzIiwidGFyZ2V0QXBwbGljYXRpb25CdW5kbGVJRCIsInRhcmdldEFwcGxpY2F0aW9uRW52aXJvbm1lbnQiLCJ0YXJnZXRBcHBsaWNhdGlvblBhdGgiLCJ0ZXN0QXBwbGljYXRpb25EZXBlbmRlbmNpZXMiLCJ0ZXN0QXBwbGljYXRpb25Vc2VyT3ZlcnJpZGVzIiwidGVzdEJ1bmRsZVJlbGF0aXZlUGF0aCIsInRlc3RFeGVjdXRpb25PcmRlcmluZyIsInRlc3RUaW1lb3V0c0VuYWJsZWQiLCJ0ZXN0c0RyaXZlbkJ5SURFIiwidGVzdHNNdXN0UnVuT25NYWluVGhyZWFkIiwidGVzdHNUb1J1biIsInRlc3RzVG9Ta2lwIiwidHJlYXRNaXNzaW5nQmFzZWxpbmVzQXNGYWlsdXJlcyIsInVzZXJBdHRhY2htZW50TGlmZXRpbWUiLCJ0ZXN0QnVuZGxlVVJMIiwiVHlwZUVycm9yIiwic2Vzc2lvbklkZW50aWZpZXIiLCJnZXRCeXRlcyIsIlhDQWN0aXZpdHlSZWNvcmQiLCJfa2V5cyIsInJlZHVjZSIsImFjYyIsIlVOQVJDSElWRV9DTEFTU19NQVAiLCJEVFN5c21vblRhcE1lc3NhZ2UiLCJEVFRhcEhlYXJ0YmVhdE1lc3NhZ2UiLCJEVFRhcE1lc3NhZ2VBcmNoaXZlIiwiRFRLVHJhY2VUYXBNZXNzYWdlIiwiRXJyb3JBcmNoaXZlIiwiRXhjZXB0aW9uQXJjaGl2ZSIsIk5TRGljdGlvbmFyeSIsIk5TTXV0YWJsZURpY3Rpb25hcnkiLCJOU0FycmF5IiwiTlNNdXRhYmxlQXJyYXkiLCJOU011dGFibGVTZXQiLCJOU1NldCIsIlVuYXJjaGl2ZSIsImlucHV0Qnl0ZXMiLCJpbnB1dCIsInVucGFja2VkVWlkcyIsInRvcFVJRCIsIm9iamVjdHMiLCJ1bnBhY2tBcmNoaXZlSGVhZGVyIiwicGxpc3QiLCJwYXJzZUJ1ZmZlciIsIiRhcmNoaXZlciIsIiR2ZXJzaW9uIiwidG9wIiwiJHRvcCIsInJvb3QiLCJKU09OIiwic3RyaW5naWZ5IiwiJG9iamVjdHMiLCJjbGFzc0ZvclVpZCIsIm1ldGEiLCIkY2xhc3NuYW1lIiwia2xhc3MiLCJfIiwiaXNOaWwiLCJpc1VuZGVmaW5lZCIsInJhd09iaiIsImtsYXNzT2JqIiwidG9PYmplY3QiLCJBcmNoaXZlIiwiaW5wdXRPYmplY3QiLCJ1aWRGb3JBcmNoaXZlciIsImFkZGl0aW9uIiwicHVzaCIsIiRjbGFzc2VzIiwiaXNOdWxsIiwiaW5jbHVkZXMiLCJhcmNoaXZlT2JqIiwiZW5jb2RlVG9wTGV2ZWwiLCJBcnJheSIsImVuY29kZUFycmF5IiwiU2V0IiwiZW5jb2RlU2V0IiwiZW5jb2RlWENUZXN0Q29uZmlndXJhdGlvbiIsIk9iamVjdCIsIm9iak5hbWUiLCJlbmNvZGVEaWN0Iiwib2JqcyIsImtleXMiLCJ2YWx1ZXMiLCJlbnRyaWVzIiwiZm9yRWFjaCIsInZhbHVlIiwidG9CeXRlcyIsImJwbGlzdENyZWF0ZSIsInVuYXJjaGl2ZSIsInVwZGF0ZU5TS2V5ZWRBcmNoaXZlQ2xhc3MiLCJzdWJDbGFzcyIsIl9zdWJDbGFzcyRwcm90b3R5cGUiLCJfc3ViQ2xhc3MkcHJvdG90eXBlMiIsImlzRnVuY3Rpb24iLCJwcm90b3R5cGUiXSwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9saWIvaW5zdHJ1bWVudC90cmFuc2Zvcm1lci9uc2tleWVkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwbGlzdGxpYiBmcm9tICdicGxpc3QtcGFyc2VyJztcbmltcG9ydCBicGxpc3RDcmVhdGUgZnJvbSAnYnBsaXN0LWNyZWF0b3InO1xuaW1wb3J0IHsgcGFyc2UgYXMgdXVpZFBhcnNlLCBzdHJpbmdpZnkgYXMgdXVpZFN0cmluZ2lmeSB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuY29uc3QgTlNLRVlFRF9BUkNISVZFX1ZFUlNJT04gPSAxMDBfMDAwO1xuY29uc3QgTlVMTF9VSUQgPSBuZXcgcGxpc3RsaWIuVUlEKDApO1xuY29uc3QgQ1lDTEVfVE9LRU4gPSAnQ3ljbGVUb2tlbic7XG5jb25zdCBQUklNSVRJVkVfVFlQRVMgPSBbJ051bWJlcicsICdTdHJpbmcnLCAnQm9vbGVhbicsICdVSUQnLCAnQnVmZmVyJ107XG5jb25zdCBOT05fRU5DT0RBQkxFX1RZUEVTID0gWydudW1iZXInLCAnYm9vbGVhbiddO1xuY29uc3QgTlNLRVlFREFSQ0hJVkVSID0gJ05TS2V5ZWRBcmNoaXZlcic7XG5jb25zdCBVTklYMkFQUExFX1RJTUVTVEFNUF9TRUNPTkQgPSA5NzgzMDcyMDA7XG5jb25zdCBGT1JNQVRfVkVSU0lPTiA9ICdmb3JtYXRWZXJzaW9uJztcbmNvbnN0IE5TX09CSkVDVCA9ICdOU09iamVjdCc7XG5cblxuY2xhc3MgQXJjaGl2ZWRPYmplY3Qge1xuICAvKipcbiAgICogU3RhdGVmdWwgd3JhcHBlciBhcm91bmQgQXJjaGl2ZSBmb3IgYW4gb2JqZWN0IGJlaW5nIGFyY2hpdmVkLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7VW5hcmNoaXZlfSB1bmFyY2hpdmVyXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3Iob2JqZWN0LCB1bmFyY2hpdmVyKSB7XG4gICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XG4gICAgdGhpcy5fdW5hcmNoaXZlciA9IHVuYXJjaGl2ZXI7XG4gIH1cblxuICBkZWNvZGVJbmRleChpbmRleCkge1xuICAgIHJldHVybiB0aGlzLl91bmFyY2hpdmVyLmRlY29kZU9iamVjdChpbmRleCk7XG4gIH1cblxuICBkZWNvZGUoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3VuYXJjaGl2ZXIuZGVjb2RlS2V5KHRoaXMub2JqZWN0LCBrZXkpO1xuICB9XG59XG5cbmNsYXNzIEFyY2hpdmluZ09iamVjdCB7XG4gIC8qKlxuICAgKiBTdGF0ZWZ1bCB3cmFwcGVyIGFyb3VuZCBVbmFyY2hpdmUgZm9yIGFuIGFyY2hpdmVkIG9iamVjdFxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7QXJjaGl2ZX0gYXJjaGl2ZXJcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvYmplY3QsIGFyY2hpdmVyKSB7XG4gICAgdGhpcy5fYXJjaGl2ZU9iaiA9IG9iamVjdDtcbiAgICB0aGlzLl9hcmNoaXZlciA9IGFyY2hpdmVyO1xuICB9XG5cbiAgZW5jb2RlKGtleSwgdmFsKSB7XG4gICAgdGhpcy5fYXJjaGl2ZU9ialtrZXldID0gdGhpcy5fYXJjaGl2ZXIuZW5jb2RlKHZhbCk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIG11c3QgYmUgaW5oZXJpdGVkIHdoZW4gY3JlYXRpbmcgYW4gYXJjaGl2ZS91bmFyY2hpdmUgc3ViY2xhc3NcbiAqIEFuZCB5b3UgbmVlZCB0byBjYWxsIGB1cGRhdGVOU0tleWVkQXJjaGl2ZUNsYXNzYCBhZGQgc3ViY2xhc3MgdG8gYXJjaGl2ZS91bmFyY2hpdmUgb2JqZWN0XG4gKi9cbmNsYXNzIEJhc2VBcmNoaXZlSGFuZGxlciB7XG4gIC8qKlxuICAgKiBzb21lIG9mIHRoZSBjbGFzc2VzIG1heSBoYXZlIHRvIGFkZCAnTlNPYmplY3QnIG9yIG1heWJlIG1vcmUgaW4gJGNsYXNzZXMgd2hpbGUgZW5jb2RpbmcuXG4gICAqL1xuICBhZGRpdGlvbkNsYXNzZXMgPSBbXTtcbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJjaGl2ZWRPYmplY3R9IGFyY2hpdmVcbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICBkZWNvZGVBcmNoaXZlKGFyY2hpdmUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYERpZCBub3Qga25vdyBob3cgdG8gZGVjb2RlIHRoZSBvYmplY3RgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqICBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzXG4gICAqIEBwYXJhbSB7QXJjaGl2aW5nT2JqZWN0fSBhcmNoaXZlXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgZW5jb2RlQXJjaGl2ZShvYmosIGFyY2hpdmUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYERpZCBub3Qga25vdyBob3cgdG8gZW5jb2RlIHRoZSBvYmplY3RgKTtcbiAgfVxufVxuXG4vKipcbiAqIFwiRGVsZWdhdGUgZm9yIHBhY2tpbmcvdW5wYWNraW5nIE5TKE11dGFibGUpRGljdGlvbmFyeSBvYmplY3RzXCJcbiAqL1xuY2xhc3MgRGljdEFyY2hpdmUgZXh0ZW5kcyBCYXNlQXJjaGl2ZUhhbmRsZXIge1xuICBkZWNvZGVBcmNoaXZlKGFyY2hpdmUpIHtcbiAgICBjb25zdCBrZXlVaWRzID0gYXJjaGl2ZS5kZWNvZGUoJ05TLmtleXMnKTtcbiAgICBjb25zdCB2YWxVaWRzID0gYXJjaGl2ZS5kZWNvZGUoJ05TLm9iamVjdHMnKTtcbiAgICBjb25zdCBkID0ge307XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlVaWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBrZXkgPSBhcmNoaXZlLmRlY29kZUluZGV4KGtleVVpZHNbaV0pO1xuICAgICAgZFtrZXldID0gYXJjaGl2ZS5kZWNvZGVJbmRleCh2YWxVaWRzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGQ7XG4gIH1cbn1cblxuLyoqXG4gKiBEZWxlZ2F0ZSBmb3IgcGFja2luZy91bnBhY2tpbmcgTlMoTXV0YWJsZSlBcnJheSBvYmplY3RzXG4gKi9cbmNsYXNzIExpc3RBcmNoaXZlIGV4dGVuZHMgQmFzZUFyY2hpdmVIYW5kbGVyIHtcbiAgZGVjb2RlQXJjaGl2ZShhcmNoaXZlKSB7XG4gICAgY29uc3QgdWlkcyA9IGFyY2hpdmUuZGVjb2RlKCdOUy5vYmplY3RzJyk7XG4gICAgcmV0dXJuIHVpZHMubWFwKGFyY2hpdmUuZGVjb2RlSW5kZXguYmluZChhcmNoaXZlKSk7XG4gIH1cbn1cblxuY2xhc3MgRFRUYXBNZXNzYWdlUGxpc3QgZXh0ZW5kcyBCYXNlQXJjaGl2ZUhhbmRsZXIge1xuICBkZWNvZGVBcmNoaXZlKGFyY2hpdmUpIHtcbiAgICByZXR1cm4gYXJjaGl2ZS5kZWNvZGUoJ0RUVGFwTWVzc2FnZVBsaXN0Jyk7XG4gIH1cbn1cblxuY2xhc3MgTlNFcnJvciBleHRlbmRzIEJhc2VBcmNoaXZlSGFuZGxlciB7XG4gIGRlY29kZUFyY2hpdmUoYXJjaGl2ZSkge1xuICAgIHJldHVybiB7XG4gICAgICAkY2xhc3M6ICdOU0Vycm9yJyxcbiAgICAgIGRvbWFpbjogYXJjaGl2ZS5kZWNvZGUoJ05TRG9tYWluJyksXG4gICAgICB1c2VyaW5mbzogYXJjaGl2ZS5kZWNvZGUoJ05TVXNlckluZm8nKSxcbiAgICAgIGNvZGU6IGFyY2hpdmUuZGVjb2RlKCdOU0NvZGUnKVxuICAgIH07XG4gIH1cbn1cblxuY2xhc3MgTlNFeGNlcHRpb24gZXh0ZW5kcyBCYXNlQXJjaGl2ZUhhbmRsZXIge1xuICBkZWNvZGVBcmNoaXZlKGFyY2hpdmUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJGNsYXNzOiAnTlNFeGNlcHRpb24nLFxuICAgICAgcmVhc29uOiBhcmNoaXZlLmRlY29kZSgnTlMucmVhc29uJyksXG4gICAgICB1c2VyaW5mbzogYXJjaGl2ZS5kZWNvZGUoJ3VzZXJpbmZvJyksXG4gICAgICBuYW1lOiBhcmNoaXZlLmRlY29kZSgnTlMubmFtZScpXG4gICAgfTtcbiAgfVxufVxuXG5jbGFzcyBOU1VSTCBleHRlbmRzIEJhc2VBcmNoaXZlSGFuZGxlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyp9IGJhc2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlIHVzdWFsbHkgaW9zIGRldmljZSByZWxhdGl2ZSBwYXRoIGUuZzogZmlsZTovL3h4L1xuICAgKi9cbiAgY29uc3RydWN0b3IoYmFzZSwgcmVsYXRpdmUpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2Jhc2UgPSBiYXNlO1xuICAgIHRoaXMuX3JlbGF0aXZlID0gcmVsYXRpdmU7XG4gICAgdGhpcy5hZGRpdGlvbkNsYXNzZXMgPSBbTlNfT0JKRUNUXTtcbiAgfVxuXG4gIGRlY29kZUFyY2hpdmUoYXJjaGl2ZSkge1xuICAgIHJldHVybiB7ICRjbGFzczogJ05TVVJMJywgYmFzZTogYXJjaGl2ZS5kZWNvZGUoJ05TLmJhc2UnKSwgcmVsYXRpdmU6IGFyY2hpdmUuZGVjb2RlKCdOUy5yZWxhdGl2ZScpIH07XG4gIH1cblxuICBlbmNvZGVBcmNoaXZlKG9iaiwgYXJjaGl2ZSkge1xuICAgIGFyY2hpdmUuZW5jb2RlKCdOUy5iYXNlJywgb2JqLl9iYXNlKTtcbiAgICBhcmNoaXZlLmVuY29kZSgnTlMucmVsYXRpdmUnLCBvYmouX3JlbGF0aXZlKTtcbiAgfVxufVxuXG5jbGFzcyBOU0RhdGUgZXh0ZW5kcyBCYXNlQXJjaGl2ZUhhbmRsZXIge1xuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRhdGEgdGltZXN0YW1wIGluIHNlY29uZHNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICB9XG5cbiAgZGVjb2RlQXJjaGl2ZShhcmNoaXZlKSB7XG4gICAgcmV0dXJuIFVOSVgyQVBQTEVfVElNRVNUQU1QX1NFQ09ORCArIGFyY2hpdmUuZGVjb2RlKCdOUy50aW1lJyk7XG4gIH1cblxuICBlbmNvZGVBcmNoaXZlKG9iaiwgYXJjaGl2ZSkge1xuICAgIGFyY2hpdmUuZW5jb2RlKCdOUy50aW1lJywgb2JqLl9kYXRhIC0gVU5JWDJBUFBMRV9USU1FU1RBTVBfU0VDT05EKTtcbiAgfVxufVxuXG5jbGFzcyBOU011dGFibGVTdHJpbmcgZXh0ZW5kcyBCYXNlQXJjaGl2ZUhhbmRsZXIge1xuICBkZWNvZGVBcmNoaXZlKGFyY2hpdmUpIHtcbiAgICByZXR1cm4gYXJjaGl2ZS5kZWNvZGUoJ05TLnN0cmluZycpO1xuICB9XG59XG5cbmNsYXNzIE5TTXV0YWJsZURhdGEgZXh0ZW5kcyBCYXNlQXJjaGl2ZUhhbmRsZXIge1xuICBkZWNvZGVBcmNoaXZlKGFyY2hpdmUpIHtcbiAgICByZXR1cm4gYXJjaGl2ZS5kZWNvZGUoJ05TLmRhdGEnKTtcbiAgfVxufVxuXG5jbGFzcyBOU1VVSUQgZXh0ZW5kcyBCYXNlQXJjaGl2ZUhhbmRsZXIge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGEgdXVpZCBmb3JtYXQgZGF0YSBlLmc6MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB0aGlzLmFkZGl0aW9uQ2xhc3NlcyA9IFtOU19PQkpFQ1RdO1xuICB9XG5cbiAgZGVjb2RlQXJjaGl2ZShhcmNoaXZlKSB7XG4gICAgcmV0dXJuIHV1aWRTdHJpbmdpZnkoYXJjaGl2ZS5kZWNvZGUoJ05TLnV1aWRieXRlcycpKTtcbiAgfVxuXG4gIGVuY29kZUFyY2hpdmUob2JqLCBhcmNoaXZlKSB7XG4gICAgYXJjaGl2ZS5fYXJjaGl2ZU9ialsnTlMudXVpZGJ5dGVzJ10gPSBCdWZmZXIuZnJvbSh1dWlkUGFyc2Uob2JqLl9kYXRhKS5idWZmZXIpO1xuICB9XG59XG5cbmNsYXNzIFhDVENhcGFiaWxpdGllcyBleHRlbmRzIEJhc2VBcmNoaXZlSGFuZGxlciB7XG4gIGRlY29kZUFyY2hpdmUoYXJjaGl2ZSkge1xuICAgIHJldHVybiBhcmNoaXZlLmRlY29kZSgnY2FwYWJpbGl0aWVzLWRpY3Rpb25hcnknKTtcbiAgfVxufVxuXG4vKipcbiAqIFNvbWUgb2YgdGhlIHBsaXN0IGNsYXNzZXMgbWF5IG5vdCBiZSBpbmNsdWRlZCBhbmQgc2hvdWxkIG5vdCBiZSBjYXJlZC5cbiAqIFVzaW5nIHRoaXMgYXMgYSBkZWZhdWx0IGRlY29kZXIgZm9yIHVua25vd24gZW50aXRpZXMgdG8gYXZvaWQgaW50ZXJydXB0aW5nIGRlY29kZSBwcm9jZXNzLlxuICovXG5jbGFzcyBOU0lnbm9yZSBleHRlbmRzIEJhc2VBcmNoaXZlSGFuZGxlciB7XG4gIGRlY29kZUFyY2hpdmUoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuY2xhc3MgTlNOdWxsIGV4dGVuZHMgQmFzZUFyY2hpdmVIYW5kbGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmFkZGl0aW9uQ2xhc3NlcyA9IFtOU19PQkpFQ1RdO1xuICB9XG4gIGRlY29kZUFyY2hpdmUoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBYQ1Rlc3RDb25maWd1cmF0aW9uUGxpc3RcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nIHwgTlNVUkx9IHRlc3RCdW5kbGVVUkxcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nIHwgTlNVVUlEfSBzZXNzaW9uSWRlbnRpZmllclxuICogQHByb3BlcnR5IHtzdHJpbmc/fSBwcm9kdWN0TW9kdWxlTmFtZVxuICogQHByb3BlcnR5IHtzdHJpbmc/fSB0YXJnZXRBcHBsaWNhdGlvbkJ1bmRsZUlEXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdP30gdGFyZ2V0QXBwbGljYXRpb25Bcmd1bWVudHNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nW10/fSB0ZXN0c1RvUnVuXG4gKiBAcHJvcGVydHkge3N0cmluZ1tdP30gdGVzdHNUb1NraXBcbiAqL1xuY2xhc3MgWENUZXN0Q29uZmlndXJhdGlvbiBleHRlbmRzIEJhc2VBcmNoaXZlSGFuZGxlciB7XG4gIHN0YXRpYyBfZGVmYXVsdCA9IHtcbiAgICBhZ2dyZWdhdGVTdGF0aXN0aWNzQmVmb3JlQ3Jhc2g6IHtcbiAgICAgIFhDU3VpdGVSZWNvcmRzS2V5OiB7fVxuICAgIH0sXG4gICAgYXV0b21hdGlvbkZyYW1ld29ya1BhdGg6ICcvRGV2ZWxvcGVyL0xpYnJhcnkvUHJpdmF0ZUZyYW1ld29ya3MvWENUQXV0b21hdGlvblN1cHBvcnQuZnJhbWV3b3JrJyxcbiAgICBiYXNlbGluZUZpbGVSZWxhdGl2ZVBhdGg6IHVuZGVmaW5lZCxcbiAgICBiYXNlbGluZUZpbGVVUkw6IHVuZGVmaW5lZCxcbiAgICBkZWZhdWx0VGVzdEV4ZWN1dGlvblRpbWVBbGxvd2FuY2U6IHVuZGVmaW5lZCxcbiAgICBkaXNhYmxlUGVyZm9ybWFuY2VNZXRyaWNzOiBmYWxzZSxcbiAgICBlbWl0T1NMb2dzOiBmYWxzZSxcbiAgICBmb3JtYXRWZXJzaW9uOiAyLFxuICAgIGdhdGhlckxvY2FsaXphYmxlU3RyaW5nc0RhdGE6IGZhbHNlLFxuICAgIGluaXRpYWxpemVGb3JVSVRlc3Rpbmc6IHRydWUsXG4gICAgbWF4aW11bVRlc3RFeGVjdXRpb25UaW1lQWxsb3dhbmNlOiB1bmRlZmluZWQsXG4gICAgcHJvZHVjdE1vZHVsZU5hbWU6ICdXZWJEcml2ZXJBZ2VudFJ1bm5lcicsXG4gICAgcmFuZG9tRXhlY3V0aW9uT3JkZXJpbmdTZWVkOiB1bmRlZmluZWQsXG4gICAgcmVwb3J0QWN0aXZpdGllczogdHJ1ZSxcbiAgICByZXBvcnRSZXN1bHRzVG9JREU6IHRydWUsXG4gICAgc3lzdGVtQXR0YWNobWVudExpZmV0aW1lOiAyLFxuICAgIHRhcmdldEFwcGxpY2F0aW9uQXJndW1lbnRzOiBbXSxcbiAgICB0YXJnZXRBcHBsaWNhdGlvbkJ1bmRsZUlEOiB1bmRlZmluZWQsXG4gICAgdGFyZ2V0QXBwbGljYXRpb25FbnZpcm9ubWVudDogdW5kZWZpbmVkLFxuICAgIHRhcmdldEFwcGxpY2F0aW9uUGF0aDogJy9LRUVQLVRISVMtTk9ULUVNUFRZL0tFRVAtVEhJUy1OT1QtRU1QVFknLFxuICAgIHRlc3RBcHBsaWNhdGlvbkRlcGVuZGVuY2llczoge30sXG4gICAgdGVzdEFwcGxpY2F0aW9uVXNlck92ZXJyaWRlczogdW5kZWZpbmVkLFxuICAgIHRlc3RCdW5kbGVSZWxhdGl2ZVBhdGg6IHVuZGVmaW5lZCxcbiAgICB0ZXN0RXhlY3V0aW9uT3JkZXJpbmc6IDAsXG4gICAgdGVzdFRpbWVvdXRzRW5hYmxlZDogZmFsc2UsXG4gICAgdGVzdHNEcml2ZW5CeUlERTogZmFsc2UsXG4gICAgdGVzdHNNdXN0UnVuT25NYWluVGhyZWFkOiB0cnVlLFxuICAgIHRlc3RzVG9SdW46IHVuZGVmaW5lZCxcbiAgICB0ZXN0c1RvU2tpcDogdW5kZWZpbmVkLFxuICAgIHRyZWF0TWlzc2luZ0Jhc2VsaW5lc0FzRmFpbHVyZXM6IGZhbHNlLFxuICAgIHVzZXJBdHRhY2htZW50TGlmZXRpbWU6IDFcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1hDVGVzdENvbmZpZ3VyYXRpb25QbGlzdH0gZGF0YVxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCk7XG4gICAgaWYgKCFkYXRhLnRlc3RCdW5kbGVVUkwpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3Rlc3RCdW5kbGVVUkwgY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgfVxuICAgIGlmICghZGF0YS5zZXNzaW9uSWRlbnRpZmllcikge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2Vzc2lvbklkZW50aWZpZXIgY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZGF0YS50ZXN0QnVuZGxlVVJMID09PSAnc3RyaW5nJykge1xuICAgICAgZGF0YS50ZXN0QnVuZGxlVVJMID0gbmV3IE5TVVJMKHVuZGVmaW5lZCwgZGF0YS50ZXN0QnVuZGxlVVJMKTtcbiAgICB9XG4gICAgaWYgKCEoZGF0YS50ZXN0QnVuZGxlVVJMIGluc3RhbmNlb2YgTlNVUkwpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCB0ZXN0QnVuZGxlVVJMIHRvIGJlIGEgdmFsaWQgTlNVUkwgaW5zdGFuY2UsIGdvdCAke2RhdGEudGVzdEJ1bmRsZVVSTC5jb25zdHJ1Y3Rvci5uYW1lfSBpbnN0ZWFkYCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZGF0YS5zZXNzaW9uSWRlbnRpZmllciA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGRhdGEuc2Vzc2lvbklkZW50aWZpZXIgPSBuZXcgTlNVVUlEKGRhdGEuc2Vzc2lvbklkZW50aWZpZXIpO1xuICAgIH1cbiAgICBpZiAoIShkYXRhLnNlc3Npb25JZGVudGlmaWVyIGluc3RhbmNlb2YgTlNVVUlEKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgc2Vzc2lvbklkZW50aWZpZXIgdG8gYmUgYSB2YWxpZCBOU1VVSUQgaW5zdGFuY2UsIGdvdCAke2RhdGEuc2Vzc2lvbklkZW50aWZpZXIuY29uc3RydWN0b3IubmFtZX0gaW5zdGVhZGApO1xuICAgIH1cbiAgICB0aGlzLl9kYXRhID0geyAuLi5YQ1Rlc3RDb25maWd1cmF0aW9uLl9kZWZhdWx0LCAuLi5kYXRhIH07XG4gIH1cblxuICBnZXRCeXRlcygpIHtcbiAgICByZXR1cm4gYXJjaGl2ZSh0aGlzKTtcbiAgfVxufVxuXG5jbGFzcyBYQ0FjdGl2aXR5UmVjb3JkIGV4dGVuZHMgQmFzZUFyY2hpdmVIYW5kbGVyIHtcbiAgc3RhdGljIF9rZXlzID0gWydhY3Rpdml0eVR5cGUnLCAnYXR0YWNobWVudHMnLCAnZmluaXNoJywgJ3N0YXJ0JywgJ3RpdGxlJywgJ3V1aWQnXTtcbiAgZGVjb2RlQXJjaGl2ZShhcmNoaXZlKSB7XG4gICAgcmV0dXJuIFhDQWN0aXZpdHlSZWNvcmQuX2tleXMucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgICAgYWNjW2tleV0gPSBhcmNoaXZlLmRlY29kZShrZXkpO1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG4gIH1cbn1cblxuLyoqXG4gKiBkZWNvZGUgYW5kIGVuY29kZSBBcmNoaXZlIG9mIGN1cnJlbnRseSBrbm93biBkYXRhIGZvcm1hdHNcbiAqL1xuY29uc3QgVU5BUkNISVZFX0NMQVNTX01BUCA9IHtcbiAgRFRUYXBNZXNzYWdlUGxpc3QsXG4gIERUU3lzbW9uVGFwTWVzc2FnZTogRFRUYXBNZXNzYWdlUGxpc3QsXG4gIERUVGFwSGVhcnRiZWF0TWVzc2FnZTogRFRUYXBNZXNzYWdlUGxpc3QsXG4gIERUVGFwTWVzc2FnZUFyY2hpdmU6IERUVGFwTWVzc2FnZVBsaXN0LFxuICBEVEtUcmFjZVRhcE1lc3NhZ2U6IERUVGFwTWVzc2FnZVBsaXN0LFxuICBFcnJvckFyY2hpdmU6IE5TRXJyb3IsXG4gIEV4Y2VwdGlvbkFyY2hpdmU6IE5TRXhjZXB0aW9uLFxuICBOU0RpY3Rpb25hcnk6IERpY3RBcmNoaXZlLFxuICBOU011dGFibGVEaWN0aW9uYXJ5OiBEaWN0QXJjaGl2ZSxcbiAgTlNBcnJheTogTGlzdEFyY2hpdmUsXG4gIE5TTXV0YWJsZUFycmF5OiBMaXN0QXJjaGl2ZSxcbiAgTlNNdXRhYmxlU2V0OiBMaXN0QXJjaGl2ZSxcbiAgTlNTZXQ6IExpc3RBcmNoaXZlLFxuICBOU0RhdGUsXG4gIE5TRXJyb3IsXG4gIE5TRXhjZXB0aW9uLFxuICBOU011dGFibGVTdHJpbmcsXG4gIE5TTXV0YWJsZURhdGEsXG4gIE5TTnVsbCxcbiAgTlNVVUlELFxuICBOU1VSTCxcbiAgWENBY3Rpdml0eVJlY29yZCxcbiAgWENUQ2FwYWJpbGl0aWVzLFxuICBYQ1Rlc3RDb25maWd1cmF0aW9uLFxufTtcblxuLyoqXG4gKiBDYXBhYmxlIG9mIHVucGFja2luZyBhbiBhcmNoaXZlZCBvYmplY3QgdHJlZSBpbiB0aGUgTlNLZXllZEFyY2hpdmUgZm9ybWF0LlxuICogQXBwbGUncyBpbXBsZW1lbnRhdGlvbiBjYW4gYmUgZm91bmQgaGVyZTpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBsZS9zd2lmdC1jb3JlbGlicy1mb3VuZGF0aW9uL2Jsb2IvbWFpbi9Tb3VyY2VzL0ZvdW5kYXRpb24vTlNLZXllZFVuYXJjaGl2ZXIuc3dpZnRcbiAqL1xuY2xhc3MgVW5hcmNoaXZlIHtcbiAgY29uc3RydWN0b3IoaW5wdXRCeXRlcykge1xuICAgIHRoaXMuaW5wdXQgPSBpbnB1dEJ5dGVzO1xuICAgIHRoaXMudW5wYWNrZWRVaWRzID0ge307XG4gICAgdGhpcy50b3BVSUQgPSBOVUxMX1VJRDtcbiAgICB0aGlzLm9iamVjdHMgPSBbXTtcbiAgfVxuXG4gIHVucGFja0FyY2hpdmVIZWFkZXIoKSB7XG4gICAgY29uc3QgcGxpc3QgPSBwbGlzdGxpYi5wYXJzZUJ1ZmZlcih0aGlzLmlucHV0KVswXTtcbiAgICBpZiAocGxpc3QuJGFyY2hpdmVyICE9PSBOU0tFWUVEQVJDSElWRVIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5zdXBwb3J0ZWQgZW5jb2RlcjogJHtwbGlzdC4kYXJjaGl2ZXJ9YCk7XG4gICAgfVxuICAgIGlmIChwbGlzdC4kdmVyc2lvbiAhPT0gTlNLRVlFRF9BUkNISVZFX1ZFUlNJT04pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgJHtOU0tFWUVEX0FSQ0hJVkVfVkVSU0lPTn0sIGdvdCAke3BsaXN0LiR2ZXJzaW9ufWApO1xuICAgIH1cbiAgICBjb25zdCB0b3AgPSBwbGlzdC4kdG9wO1xuICAgIGNvbnN0IHRvcFVJRCA9IHRvcC5yb290O1xuICAgIGlmICghdG9wVUlEKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHRvcCBvYmplY3QgZGlkIG5vdCBoYXZlIGEgVUlEISBkdW1wOiAke0pTT04uc3RyaW5naWZ5KHRvcCl9YCk7XG4gICAgfVxuICAgIHRoaXMudG9wVUlEID0gdG9wVUlEO1xuICAgIHRoaXMub2JqZWN0cyA9IHBsaXN0LiRvYmplY3RzO1xuICB9XG5cbiAgLyoqXG4gICAqIHVzZSB0aGUgVU5BUkNISVZFX0NMQVNTX01BUCB0byBmaW5kIHRoZSB1bmFyY2hpdmluZyBkZWxlZ2F0ZSBvZiBhIHVpZFxuICAgKi9cbiAgY2xhc3NGb3JVaWQoaW5kZXgpIHtcbiAgICBjb25zdCBtZXRhID0gdGhpcy5vYmplY3RzW2luZGV4LlVJRF07XG4gICAgY29uc3QgbmFtZSA9IG1ldGEuJGNsYXNzbmFtZTtcbiAgICBjb25zdCBrbGFzcyA9IFVOQVJDSElWRV9DTEFTU19NQVBbbmFtZV0gPz8gTlNJZ25vcmU7XG4gICAgcmV0dXJuIGtsYXNzO1xuICB9XG5cbiAgZGVjb2RlS2V5KG9iaiwga2V5KSB7XG4gICAgY29uc3QgdmFsID0gb2JqW2tleV07XG4gICAgcmV0dXJuIF8uaXNOaWwodmFsPy5VSUQpID8gdmFsIDogdGhpcy5kZWNvZGVPYmplY3QodmFsKTtcbiAgfVxuXG4gIGRlY29kZU9iamVjdChpbmRleCkge1xuICAgIGlmIChpbmRleCA9PT0gTlVMTF9VSUQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBvYmogPSB0aGlzLnVucGFja2VkVWlkc1tpbmRleF07XG4gICAgaWYgKG9iaiA9PT0gQ1lDTEVfVE9LRU4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgYXJjaGl2ZSBoYXMgYSBjeWNsZSB3aXRoICR7aW5kZXh9YCk7XG4gICAgfVxuICAgIGlmICghXy5pc1VuZGVmaW5lZChvYmopKSB7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH1cbiAgICBjb25zdCByYXdPYmogPSB0aGlzLm9iamVjdHNbaW5kZXguVUlEXTtcbiAgICB0aGlzLnVucGFja2VkVWlkc1tpbmRleC5VSURdID0gQ1lDTEVfVE9LRU47XG5cbiAgICBpZiAoIXJhd09iaj8uJGNsYXNzKSB7XG4gICAgICB0aGlzLnVucGFja2VkVWlkc1tpbmRleC5VSURdID0gb2JqO1xuICAgICAgcmV0dXJuIHJhd09iajtcbiAgICB9XG4gICAgY29uc3Qga2xhc3MgPSB0aGlzLmNsYXNzRm9yVWlkKHJhd09iai4kY2xhc3MpO1xuICAgIGNvbnN0IGtsYXNzT2JqID0gbmV3IGtsYXNzKCkuZGVjb2RlQXJjaGl2ZShuZXcgQXJjaGl2ZWRPYmplY3QocmF3T2JqLCB0aGlzKSk7XG4gICAgdGhpcy51bnBhY2tlZFVpZHNbaW5kZXguVUlEXSA9IGtsYXNzT2JqO1xuICAgIHJldHVybiBrbGFzc09iajtcbiAgfVxuXG4gIHRvT2JqZWN0KCkge1xuICAgIHRoaXMudW5wYWNrQXJjaGl2ZUhlYWRlcigpO1xuICAgIHJldHVybiB0aGlzLmRlY29kZU9iamVjdCh0aGlzLnRvcFVJRCk7XG4gIH1cbn1cblxuLyoqXG4gKiBDYXBhYmxlIG9mIHBhY2tpbmcgYW4gb2JqZWN0IHRyZWUgaW50byB0aGUgTlNLZXllZEFyY2hpdmUgZm9ybWF0LlxuICogQXBwbGUncyBpbXBsZW1lbnRhdGlvbiBjYW4gYmUgZm91bmQgaGVyZTpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBsZS9zd2lmdC1jb3JlbGlicy1mb3VuZGF0aW9uL2Jsb2IvbWFpbi9Tb3VyY2VzL0ZvdW5kYXRpb24vTlNLZXllZEFyY2hpdmVyLnN3aWZ0XG4gKi9cbmNsYXNzIEFyY2hpdmUge1xuICBjb25zdHJ1Y3RvcihpbnB1dE9iamVjdCkge1xuICAgIHRoaXMuaW5wdXQgPSBpbnB1dE9iamVjdDtcbiAgICB0aGlzLm9iamVjdHMgPSBbJyRudWxsJ107IC8vIG9iamVjdHMgdGhhdCBnbyBkaXJlY3RseSBpbnRvIHRoZSBhcmNoaXZlLCBhbHdheXMgc3RhcnQgd2l0aCAkbnVsbFxuICB9XG5cbiAgdWlkRm9yQXJjaGl2ZXIoYXJjaGl2ZXIsIC4uLmFkZGl0aW9uKSB7XG4gICAgY29uc3QgdmFsID0gbmV3IHBsaXN0bGliLlVJRCh0aGlzLm9iamVjdHMubGVuZ3RoKTtcbiAgICB0aGlzLm9iamVjdHMucHVzaCh7XG4gICAgICAkY2xhc3NlczogW2FyY2hpdmVyLCAuLi5hZGRpdGlvbl0sXG4gICAgICAkY2xhc3NuYW1lOiBhcmNoaXZlclxuICAgIH0pO1xuICAgIHJldHVybiB2YWw7XG4gIH1cblxuICBhcmNoaXZlKG9iaikge1xuICAgIGlmIChfLmlzVW5kZWZpbmVkKG9iaikgfHwgXy5pc051bGwob2JqKSkge1xuICAgICAgcmV0dXJuIE5VTExfVUlEO1xuICAgIH1cbiAgICBjb25zdCBpbmRleCA9IG5ldyBwbGlzdGxpYi5VSUQodGhpcy5vYmplY3RzLmxlbmd0aCk7XG4gICAgaWYgKFBSSU1JVElWRV9UWVBFUy5pbmNsdWRlcyhvYmouY29uc3RydWN0b3IubmFtZSkpIHtcbiAgICAgIHRoaXMub2JqZWN0cy5wdXNoKG9iaik7XG4gICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICAgIGNvbnN0IGFyY2hpdmVPYmogPSB7fTtcbiAgICB0aGlzLm9iamVjdHMucHVzaChhcmNoaXZlT2JqKTtcbiAgICB0aGlzLmVuY29kZVRvcExldmVsKG9iaiwgYXJjaGl2ZU9iaik7XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgZW5jb2RlKHZhbCkge1xuICAgIGlmIChOT05fRU5DT0RBQkxFX1RZUEVTLmluY2x1ZGVzKHR5cGVvZiB2YWwpKSB7XG4gICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hcmNoaXZlKHZhbCk7XG4gIH1cblxuICBlbmNvZGVUb3BMZXZlbChvYmosIGFyY2hpdmVPYmopIHtcbiAgICBpZiAob2JqIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgIHJldHVybiB0aGlzLmVuY29kZUFycmF5KG9iaiwgYXJjaGl2ZU9iaik7XG4gICAgfSBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLmVuY29kZVNldChvYmosIGFyY2hpdmVPYmopO1xuICAgIH0gZWxzZSBpZiAob2JqIGluc3RhbmNlb2YgWENUZXN0Q29uZmlndXJhdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlWENUZXN0Q29uZmlndXJhdGlvbihvYmosIGFyY2hpdmVPYmopO1xuICAgIH0gZWxzZSBpZiAob2JqIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICBjb25zdCBvYmpOYW1lID0gb2JqLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAvLyBPbmx5IHNwZWNpYWwgY2xhc3MgaW5zdGFuY2UgYXJlIHVzZWZ1bCwgc3VjaCBhcyBOU1VSTCwgTlNVVUlELCBOU0RhdGUuXG4gICAgICAvLyBBbmQgdGhpcyBjbGFzcyBtdXN0IGFsc28gaGF2ZSB0aGUgZW5jb2RlQXJjaGl2ZSBtZXRob2RcbiAgICAgIGlmIChvYmpOYW1lIGluIFVOQVJDSElWRV9DTEFTU19NQVApIHtcbiAgICAgICAgb2JqLmVuY29kZUFyY2hpdmUob2JqLCBuZXcgQXJjaGl2aW5nT2JqZWN0KGFyY2hpdmVPYmosIHRoaXMpKTtcbiAgICAgICAgYXJjaGl2ZU9iai4kY2xhc3MgPSB0aGlzLnVpZEZvckFyY2hpdmVyKG9iak5hbWUsIC4uLihvYmouYWRkaXRpb25DbGFzc2VzID8/IFtdKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVEaWN0KG9iaiwgYXJjaGl2ZU9iaik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IEVycm9yKGBVbmFibGUgdG8gZW5jb2RlIHR5cGVzOiAke3R5cGVvZiBvYmp9YCk7XG4gICAgfVxuICB9XG5cbiAgZW5jb2RlQXJyYXkob2JqcywgYXJjaGl2ZU9iaikge1xuICAgIGFyY2hpdmVPYmouJGNsYXNzID0gdGhpcy51aWRGb3JBcmNoaXZlcignTlNBcnJheScsIE5TX09CSkVDVCk7XG4gICAgYXJjaGl2ZU9ialsnTlMub2JqZWN0cyddID0gb2Jqcy5tYXAodGhpcy5hcmNoaXZlLmJpbmQodGhpcykpO1xuICB9XG5cbiAgZW5jb2RlU2V0KG9ianMsIGFyY2hpdmVPYmopIHtcbiAgICBhcmNoaXZlT2JqLiRjbGFzcyA9IHRoaXMudWlkRm9yQXJjaGl2ZXIoJ05TU2V0JywgTlNfT0JKRUNUKTtcbiAgICBhcmNoaXZlT2JqWydOUy5vYmplY3RzJ10gPSBvYmpzLm1hcCh0aGlzLmFyY2hpdmUuYmluZCh0aGlzKSk7XG4gIH1cblxuICBlbmNvZGVEaWN0KG9iaiwgYXJjaGl2ZU9iaikge1xuICAgIGFyY2hpdmVPYmpbJ05TLmtleXMnXSA9IF8ua2V5cyhvYmopLm1hcCh0aGlzLmFyY2hpdmUuYmluZCh0aGlzKSk7XG4gICAgYXJjaGl2ZU9ialsnTlMub2JqZWN0cyddID0gXy52YWx1ZXMob2JqKS5tYXAodGhpcy5hcmNoaXZlLmJpbmQodGhpcykpO1xuICAgIC8vZGljdCBoYXMgdG8gbWFrZSBjbGFzc2VzIGFmdGVyIHZhbHVlXG4gICAgYXJjaGl2ZU9iai4kY2xhc3MgPSB0aGlzLnVpZEZvckFyY2hpdmVyKCdOU0RpY3Rpb25hcnknLCBOU19PQkpFQ1QpO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7WENUZXN0Q29uZmlndXJhdGlvbn0gb2JqXG4gICAqIEBwYXJhbSB7Kn0gYXJjaGl2ZU9ialxuICAgKi9cbiAgZW5jb2RlWENUZXN0Q29uZmlndXJhdGlvbihvYmosIGFyY2hpdmVPYmopIHtcbiAgICBhcmNoaXZlT2JqLiRjbGFzcyA9IHRoaXMudWlkRm9yQXJjaGl2ZXIoJ1hDVGVzdENvbmZpZ3VyYXRpb24nLCBOU19PQkpFQ1QpO1xuICAgIF8uZW50cmllcyhvYmouX2RhdGEpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4gYXJjaGl2ZU9ialtrZXldID0gKGtleSA9PT0gRk9STUFUX1ZFUlNJT04pID8gdGhpcy5hcmNoaXZlKHZhbHVlKSA6IHRoaXMuZW5jb2RlKHZhbHVlKSk7XG4gIH1cblxuICB0b0J5dGVzKCkge1xuICAgIGlmICh0aGlzLm9iamVjdHMubGVuZ3RoID09PSAxKSB7XG4gICAgICB0aGlzLmFyY2hpdmUodGhpcy5pbnB1dCk7XG4gICAgfVxuICAgIGNvbnN0IGQgPSB7XG4gICAgICAkdmVyc2lvbjogTlNLRVlFRF9BUkNISVZFX1ZFUlNJT04sXG4gICAgICAkYXJjaGl2ZXI6IE5TS0VZRURBUkNISVZFUixcbiAgICAgICR0b3A6IHsgcm9vdDogbmV3IHBsaXN0bGliLlVJRCgxKSB9LFxuICAgICAgJG9iamVjdHM6IHRoaXMub2JqZWN0c1xuICAgIH07XG4gICAgcmV0dXJuIGJwbGlzdENyZWF0ZShkKTtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgTlNLZXllZCBCdWZmZXIgZnJvbSBhbiBvYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dE9iamVjdFxuICogQHJldHVybnMge0J1ZmZlcn0gTlNLZXllZCBCdWZmZXJcbiAqL1xuZnVuY3Rpb24gYXJjaGl2ZShpbnB1dE9iamVjdCkge1xuICByZXR1cm4gbmV3IEFyY2hpdmUoaW5wdXRPYmplY3QpLnRvQnl0ZXMoKTtcbn1cblxuLyoqXG4gKiBQYXJzZXMgTlNLZXllZCBCdWZmZXIgaW50byBKUyBPYmplY3RcbiAqIEBwYXJhbSB7QnVmZmVyfSBpbnB1dEJ5dGVzIE5TS2V5ZWQgQnVmZmVyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBKUyBPYmplY3RcbiAqL1xuZnVuY3Rpb24gdW5hcmNoaXZlKGlucHV0Qnl0ZXMpIHtcbiAgcmV0dXJuIG5ldyBVbmFyY2hpdmUoaW5wdXRCeXRlcykudG9PYmplY3QoKTtcbn1cblxuLyoqXG4gKiBVcGRhdGUgdW5rbm93biBOU0tleWVkQXJjaGl2ZSB0eXBlcyBmb3IgcGFja2luZy91bnBhY2tpbmdcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHBhY2tpbmcvdW5wYWNraW5nIGtleSBuYW1lXG4gKiBAcGFyYW0ge0Jhc2VBcmNoaXZlSGFuZGxlcn0gc3ViQ2xhc3MgaW5oZXJpdCBmcm9tIEJhc2VBcmNoaXZlSGFuZGxlciBjbGFzc1xuICovXG5mdW5jdGlvbiB1cGRhdGVOU0tleWVkQXJjaGl2ZUNsYXNzKG5hbWUsIHN1YkNsYXNzKSB7XG4gIGlmICghXy5pc0Z1bmN0aW9uKHN1YkNsYXNzLnByb3RvdHlwZT8uZGVjb2RlQXJjaGl2ZSkgJiYgIV8uaXNGdW5jdGlvbihzdWJDbGFzcy5wcm90b3R5cGU/LmVuY29kZUFyY2hpdmUpKSB7XG4gICAgdGhyb3cgRXJyb3IoJ3N1YkNsYXNzIG11c3QgaGF2ZSBkZWNvZGVBcmNoaXZlIG9yIGVuY29kZUFyY2hpdmUgbWV0aG9kcycpO1xuICB9XG4gIGlmICghKG5hbWUgaW4gVU5BUkNISVZFX0NMQVNTX01BUCkpIHtcbiAgICBVTkFSQ0hJVkVfQ0xBU1NfTUFQW25hbWVdID0gc3ViQ2xhc3M7XG4gIH1cbn1cblxuZXhwb3J0IHsgdXBkYXRlTlNLZXllZEFyY2hpdmVDbGFzcywgQmFzZUFyY2hpdmVIYW5kbGVyLCBOU1VSTCwgTlNVVUlELCBOU0RhdGUsIFhDVGVzdENvbmZpZ3VyYXRpb24sIHVuYXJjaGl2ZSwgYXJjaGl2ZSB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLElBQUFBLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGNBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLEtBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLE9BQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQU1JLHVCQUF1QixHQUFHLE9BQU87QUFDdkMsTUFBTUMsUUFBUSxHQUFHLElBQUlDLHFCQUFRLENBQUNDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDcEMsTUFBTUMsV0FBVyxHQUFHLFlBQVk7QUFDaEMsTUFBTUMsZUFBZSxHQUFHLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFFBQVEsQ0FBQztBQUN4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