"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
require("source-map-support/register");
var _rimraf = require("rimraf");
var _uuid = require("uuid");
var _path = _interopRequireDefault(require("path"));
var _os = _interopRequireDefault(require("os"));
var _promises = _interopRequireDefault(require("fs/promises"));
const commands = {};
commands.pushNotification = async function pushNotification(payload) {
  const dstPath = _path.default.resolve(_os.default.tmpdir(), `${(0, _uuid.v4)()}.json`);
  try {
    await _promises.default.writeFile(dstPath, JSON.stringify(payload), 'utf8');
    await this.exec('push', {
      args: [this.requireUdid('push'), dstPath]
    });
  } finally {
    await (0, _rimraf.rimraf)(dstPath);
  }
};
var _default = commands;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmltcmFmIiwicmVxdWlyZSIsIl91dWlkIiwiX3BhdGgiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX29zIiwiX3Byb21pc2VzIiwiY29tbWFuZHMiLCJwdXNoTm90aWZpY2F0aW9uIiwicGF5bG9hZCIsImRzdFBhdGgiLCJwYXRoIiwicmVzb2x2ZSIsIm9zIiwidG1wZGlyIiwidXVpZFY0IiwiZnMiLCJ3cml0ZUZpbGUiLCJKU09OIiwic3RyaW5naWZ5IiwiZXhlYyIsImFyZ3MiLCJyZXF1aXJlVWRpZCIsInJpbXJhZiIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvc3ViY29tbWFuZHMvcHVzaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByaW1yYWYgfSBmcm9tICdyaW1yYWYnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZFY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBvcyBmcm9tICdvcyc7XG5pbXBvcnQgZnMgZnJvbSAnZnMvcHJvbWlzZXMnO1xuXG5jb25zdCBjb21tYW5kcyA9IHt9O1xuXG4vKipcbiAqIFNlbmQgYSBzaW11bGF0ZWQgcHVzaCBub3RpZmljYXRpb25cbiAqXG4gKiBAc2luY2UgWGNvZGUgMTEuNCBTREtcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIC0gVGhlIG9iamVjdCB0aGF0IGRlc2NyaWJlcyBBcHBsZSBwdXNoIG5vdGlmaWNhdGlvbiBjb250ZW50LlxuICogSXQgbXVzdCBjb250YWluIGEgdG9wLWxldmVsIFwiU2ltdWxhdG9yIFRhcmdldCBCdW5kbGVcIiBrZXkgd2l0aCBhIHN0cmluZyB2YWx1ZSBtYXRjaGluZ1xuICogdGhlIHRhcmdldCBhcHBsaWNhdGlvbuKAmHMgYnVuZGxlIGlkZW50aWZpZXIgYW5kIFwiYXBzXCIga2V5IHdpdGggdmFsaWQgQXBwbGUgUHVzaCBOb3RpZmljYXRpb24gdmFsdWVzLlxuICogRm9yIGV4YW1wbGU6XG4gKiB7XG4gKiAgIFwiU2ltdWxhdG9yIFRhcmdldCBCdW5kbGVcIjogXCJjb20uYXBwbGUuUHJlZmVyZW5jZXNcIixcbiAqICAgXCJhcHNcIjoge1xuICogICAgIFwiYWxlcnRcIjogXCJUaGlzIGlzIGEgc2ltdWxhdGVkIG5vdGlmaWNhdGlvbiFcIixcbiAqICAgICBcImJhZGdlXCI6IDMsXG4gKiAgICAgXCJzb3VuZFwiOiBcImRlZmF1bHRcIlxuICogICB9XG4gKiB9XG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgdGhlIGN1cnJlbnQgU0RLIHZlcnNpb24gZG9lcyBub3Qgc3VwcG9ydCB0aGUgY29tbWFuZFxuICogb3IgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIHB1c2hpbmcgdGhlIG5vdGlmaWNhdGlvblxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBgdWRpZGAgaW5zdGFuY2UgcHJvcGVydHkgaXMgdW5zZXRcbiAqL1xuY29tbWFuZHMucHVzaE5vdGlmaWNhdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIHB1c2hOb3RpZmljYXRpb24gKHBheWxvYWQpIHtcbiAgY29uc3QgZHN0UGF0aCA9IHBhdGgucmVzb2x2ZShvcy50bXBkaXIoKSwgYCR7dXVpZFY0KCl9Lmpzb25gKTtcbiAgdHJ5IHtcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUoZHN0UGF0aCwgSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksICd1dGY4Jyk7XG4gICAgYXdhaXQgdGhpcy5leGVjKCdwdXNoJywge1xuICAgICAgYXJnczogW3RoaXMucmVxdWlyZVVkaWQoJ3B1c2gnKSwgZHN0UGF0aF0sXG4gICAgfSk7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgcmltcmFmKGRzdFBhdGgpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb21tYW5kcztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFBQSxPQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxLQUFBLEdBQUFDLHNCQUFBLENBQUFILE9BQUE7QUFDQSxJQUFBSSxHQUFBLEdBQUFELHNCQUFBLENBQUFILE9BQUE7QUFDQSxJQUFBSyxTQUFBLEdBQUFGLHNCQUFBLENBQUFILE9BQUE7QUFFQSxNQUFNTSxRQUFRLEdBQUcsQ0FBQyxDQUFDO0FBc0JuQkEsUUFBUSxDQUFDQyxnQkFBZ0IsR0FBRyxlQUFlQSxnQkFBZ0JBLENBQUVDLE9BQU8sRUFBRTtFQUNwRSxNQUFNQyxPQUFPLEdBQUdDLGFBQUksQ0FBQ0MsT0FBTyxDQUFDQyxXQUFFLENBQUNDLE1BQU0sQ0FBQyxDQUFDLEVBQUcsR0FBRSxJQUFBQyxRQUFNLEVBQUMsQ0FBRSxPQUFNLENBQUM7RUFDN0QsSUFBSTtJQUNGLE1BQU1DLGlCQUFFLENBQUNDLFNBQVMsQ0FBQ1AsT0FBTyxFQUFFUSxJQUFJLENBQUNDLFNBQVMsQ0FBQ1YsT0FBTyxDQUFDLEVBQUUsTUFBTSxDQUFDO0lBQzVELE1BQU0sSUFBSSxDQUFDVyxJQUFJLENBQUMsTUFBTSxFQUFFO01BQ3RCQyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUNDLFdBQVcsQ0FBQyxNQUFNLENBQUMsRUFBRVosT0FBTztJQUMxQyxDQUFDLENBQUM7RUFDSixDQUFDLFNBQVM7SUFDUixNQUFNLElBQUFhLGNBQU0sRUFBQ2IsT0FBTyxDQUFDO0VBQ3ZCO0FBQ0YsQ0FBQztBQUFDLElBQUFjLFFBQUEsR0FFYWpCLFFBQVE7QUFBQWtCLE9BQUEsQ0FBQUMsT0FBQSxHQUFBRixRQUFBIn0=